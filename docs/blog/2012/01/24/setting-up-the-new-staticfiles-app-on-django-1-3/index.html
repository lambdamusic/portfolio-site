<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
	<head profile="http://gmpg.org/xfn/11">
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<title>Parerga und Paralipomena  &raquo; Blog Archive   &raquo; Setting up the new &#8216;staticfiles&#8217; app on Django 1.3		</title>
		<meta name="generator" content="WordPress 5.2.11" /> <!-- leave this for stats -->
		<link rel="stylesheet" href="../../../../wp-content/themes/ub_modio/style.css" type="text/css" media="screen" />
		<link rel="alternate" type="application/rss+xml" title="Parerga und Paralipomena RSS Feed" href="../../../../feed/index.html" />
		<link rel="pingback" href="http://www.michelepasin.org/blog/xmlrpc.php" />
		
		<!--[if lte IE 6]>
		<link rel="stylesheet" type="text/css" href="http://www.michelepasin.org/blog/wp-content/themes/ub_modio/ie.css">
		<![endif]-->
		<link rel="shortcut icon" href="http://www.michelepasin.org/blog/2012/01/24/setting-up-the-new-staticfiles-app-on-django-1-3/favicon.ico">
<link rel='dns-prefetch' href='http://secure.gravatar.com/' />
<link rel='dns-prefetch' href='http://s.w.org/' />
<!-- This site uses the Google Analytics by MonsterInsights plugin v7.15.1 - Using Analytics tracking - https://www.monsterinsights.com/ -->
<script type="text/javascript" data-cfasync="false">
    (window.gaDevIds=window.gaDevIds||[]).push("dZGIzZG");
	var mi_version         = '7.15.1';
	var mi_track_user      = true;
	var mi_no_track_reason = '';
	
	var disableStr = 'ga-disable-UA-2000254-3';

	/* Function to detect opted out users */
	function __gaTrackerIsOptedOut() {
		return document.cookie.indexOf(disableStr + '=true') > -1;
	}

	/* Disable tracking if the opt-out cookie exists. */
	if ( __gaTrackerIsOptedOut() ) {
		window[disableStr] = true;
	}

	/* Opt-out function */
	function __gaTrackerOptout() {
	  document.cookie = disableStr + '=true; expires=Thu, 31 Dec 2099 23:59:59 UTC; path=/';
	  window[disableStr] = true;
	}

	if ( 'undefined' === typeof gaOptout ) {
		function gaOptout() {
			__gaTrackerOptout();
		}
	}
	
	if ( mi_track_user ) {
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','__gaTracker');

		__gaTracker('create', 'UA-2000254-3', 'auto');
		__gaTracker('set', 'forceSSL', true);
		__gaTracker('send','pageview');
	} else {
		console.log( "" );
		(function() {
			/* https://developers.google.com/analytics/devguides/collection/analyticsjs/ */
			var noopfn = function() {
				return null;
			};
			var noopnullfn = function() {
				return null;
			};
			var Tracker = function() {
				return null;
			};
			var p = Tracker.prototype;
			p.get = noopfn;
			p.set = noopfn;
			p.send = noopfn;
			var __gaTracker = function() {
				var len = arguments.length;
				if ( len === 0 ) {
					return;
				}
				var f = arguments[len-1];
				if ( typeof f !== 'object' || f === null || typeof f.hitCallback !== 'function' ) {
					console.log( 'Not running function __gaTracker(' + arguments[0] + " ....) because you are not being tracked. " + mi_no_track_reason );
					return;
				}
				try {
					f.hitCallback();
				} catch (ex) {

				}
			};
			__gaTracker.create = function() {
				return new Tracker();
			};
			__gaTracker.getByName = noopnullfn;
			__gaTracker.getAll = function() {
				return [];
			};
			__gaTracker.remove = noopfn;
			window['__gaTracker'] = __gaTracker;
					})();
		}
</script>
<!-- / Google Analytics by MonsterInsights -->
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/12.0.0-1\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/12.0.0-1\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/www.michelepasin.org\/blog\/wp-includes\/js\/wp-emoji-release.min.js?ver=5.2.11"}};
			!function(e,a,t){var n,r,o,i=a.createElement("canvas"),p=i.getContext&&i.getContext("2d");function s(e,t){var a=String.fromCharCode;p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,e),0,0);e=i.toDataURL();return p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,t),0,0),e===i.toDataURL()}function c(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(o=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},r=0;r<o.length;r++)t.supports[o[r]]=function(e){if(!p||!p.fillText)return!1;switch(p.textBaseline="top",p.font="600 32px Arial",e){case"flag":return s([55356,56826,55356,56819],[55356,56826,8203,55356,56819])?!1:!s([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]);case"emoji":return!s([55357,56424,55356,57342,8205,55358,56605,8205,55357,56424,55356,57340],[55357,56424,55356,57342,8203,55358,56605,8203,55357,56424,55356,57340])}return!1}(o[r]),t.supports.everything=t.supports.everything&&t.supports[o[r]],"flag"!==o[r]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[o[r]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(n=t.source||{}).concatemoji?c(n.concatemoji):n.wpemoji&&n.twemoji&&(c(n.twemoji),c(n.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
	<link rel='stylesheet' id='wp-block-library-css'  href='../../../../wp-includes/css/dist/block-library/style.min.css%3Fver=5.2.11.css' type='text/css' media='all' />
<style id='wp-block-library-inline-css' type='text/css'>
.has-text-align-justify{text-align:justify;}
</style>
<link rel='stylesheet' id='ctf_styles-css'  href='../../../../wp-content/plugins/custom-twitter-feeds/css/ctf-styles.min.css%3Fver=1.7.css' type='text/css' media='all' />
<link rel='stylesheet' id='monsterinsights-popular-posts-style-css'  href='../../../../wp-content/plugins/google-analytics-for-wordpress/assets/css/frontend.min.css%3Fver=7.15.1.css' type='text/css' media='all' />
<link rel='stylesheet' id='wordpress-popular-posts-css-css'  href='../../../../wp-content/plugins/wordpress-popular-posts/assets/css/wpp.css%3Fver=5.2.4.css' type='text/css' media='all' />
<link rel='stylesheet' id='jetpack_css-css'  href='../../../../wp-content/plugins/jetpack/css/jetpack.css%3Fver=8.1.2.css' type='text/css' media='all' />
<script type='text/javascript'>
/* <![CDATA[ */
var monsterinsights_frontend = {"js_events_tracking":"true","download_extensions":"doc,pdf,ppt,zip,xls,docx,pptx,xlsx","inbound_paths":"[]","home_url":"http:\/\/www.michelepasin.org\/blog","hash_tracking":"false"};
/* ]]> */
</script>
<script type='text/javascript' src='../../../../wp-content/plugins/google-analytics-for-wordpress/assets/js/frontend.min.js%3Fver=7.15.1'></script>
<script type='application/json' id="wpp-json">
{"sampling_active":0,"sampling_rate":100,"ajax_url":"http:\/\/www.michelepasin.org\/blog\/wp-json\/wordpress-popular-posts\/v1\/popular-posts","ID":1734,"token":"10a27ddbef","lang":0,"debug":0}
</script>
<script type='text/javascript' src='../../../../wp-content/plugins/wordpress-popular-posts/assets/js/wpp.min.js%3Fver=5.2.4'></script>
<script type='text/javascript' src='../../../../wp-includes/js/jquery/jquery.js%3Fver=1.12.4-wp'></script>
<script type='text/javascript' src='../../../../wp-includes/js/jquery/jquery-migrate.min.js%3Fver=1.4.1'></script>
<link rel='https://api.w.org/' href='../../../../wp-json/index.html' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../../../xmlrpc.php%3Frsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../../../../wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Special issue of CMJ DVD on livecoding' href='../../13/special-issue-of-cmj-dvd-on-livecoding/index.html' />
<link rel='next' title='HTML5 Canvas Cookbook' href='../../../02/08/html5-canvas-cookbook/index.html' />
<meta name="generator" content="WordPress 5.2.11" />
<link rel="canonical" href="index.html" />
<link rel='shortlink' href='https://wp.me/pW0Ls-rY' />
<link rel="alternate" type="application/json+oembed" href="../../../../wp-json/oembed/1.0/embed%3Furl=http:%252F%252Fwww.michelepasin.org%252Fblog%252F2012%252F01%252F24%252Fsetting-up-the-new-staticfiles-app-on-django-1-3%252F" />
<link rel="alternate" type="text/xml+oembed" href="../../../../wp-json/oembed/1.0/embed%3Furl=http:%252F%252Fwww.michelepasin.org%252Fblog%252F2012%252F01%252F24%252Fsetting-up-the-new-staticfiles-app-on-django-1-3%252F&amp;format=xml" />
<style data-context="foundation-flickity-css">/*! Flickity v2.0.2
http://flickity.metafizzy.co
---------------------------------------------- */.flickity-enabled{position:relative}.flickity-enabled:focus{outline:0}.flickity-viewport{overflow:hidden;position:relative;height:100%}.flickity-slider{position:absolute;width:100%;height:100%}.flickity-enabled.is-draggable{-webkit-tap-highlight-color:transparent;tap-highlight-color:transparent;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.flickity-enabled.is-draggable .flickity-viewport{cursor:move;cursor:-webkit-grab;cursor:grab}.flickity-enabled.is-draggable .flickity-viewport.is-pointer-down{cursor:-webkit-grabbing;cursor:grabbing}.flickity-prev-next-button{position:absolute;top:50%;width:44px;height:44px;border:none;border-radius:50%;background:#fff;background:hsla(0,0%,100%,.75);cursor:pointer;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.flickity-prev-next-button:hover{background:#fff}.flickity-prev-next-button:focus{outline:0;box-shadow:0 0 0 5px #09f}.flickity-prev-next-button:active{opacity:.6}.flickity-prev-next-button.previous{left:10px}.flickity-prev-next-button.next{right:10px}.flickity-rtl .flickity-prev-next-button.previous{left:auto;right:10px}.flickity-rtl .flickity-prev-next-button.next{right:auto;left:10px}.flickity-prev-next-button:disabled{opacity:.3;cursor:auto}.flickity-prev-next-button svg{position:absolute;left:20%;top:20%;width:60%;height:60%}.flickity-prev-next-button .arrow{fill:#333}.flickity-page-dots{position:absolute;width:100%;bottom:-25px;padding:0;margin:0;list-style:none;text-align:center;line-height:1}.flickity-rtl .flickity-page-dots{direction:rtl}.flickity-page-dots .dot{display:inline-block;width:10px;height:10px;margin:0 8px;background:#333;border-radius:50%;opacity:.25;cursor:pointer}.flickity-page-dots .dot.is-selected{opacity:1}</style><style data-context="foundation-slideout-css">.slideout-menu{position:fixed;left:0;top:0;bottom:0;right:auto;z-index:0;width:256px;overflow-y:auto;-webkit-overflow-scrolling:touch;display:none}.slideout-menu.pushit-right{left:auto;right:0}.slideout-panel{position:relative;z-index:1;will-change:transform}.slideout-open,.slideout-open .slideout-panel,.slideout-open body{overflow:hidden}.slideout-open .slideout-menu{display:block}.pushit{display:none}</style>
<link rel='dns-prefetch' href='http://v0.wordpress.com/'/>
<style type='text/css'>img#wpstats{display:none}</style>
<!-- Jetpack Open Graph Tags -->
<meta property="og:type" content="article" />
<meta property="og:title" content="Setting up the new &#8216;staticfiles&#8217; app on Django 1.3" />
<meta property="og:url" content="http://www.michelepasin.org/blog/2012/01/24/setting-up-the-new-staticfiles-app-on-django-1-3/" />
<meta property="og:description" content="Even if I&#8217;ve been using Django 1.3 for a while now, I&#8217;ve been holding off on some of it new features, such as the new way to handle static files via a new app called (guess what) static…" />
<meta property="article:published_time" content="2012-01-24T10:26:09+00:00" />
<meta property="article:modified_time" content="2012-01-24T10:26:09+00:00" />
<meta property="og:site_name" content="Parerga und Paralipomena" />
<meta property="og:image" content="https://s0.wp.com/i/blank.jpg" />
<meta property="og:locale" content="en_US" />
<meta name="twitter:text:title" content="Setting up the new &#8216;staticfiles&#8217; app on Django 1.3" />
<meta name="twitter:card" content="summary" />

<!-- End Jetpack Open Graph Tags -->
<style>.ios7.web-app-mode.has-fixed header{ background-color: rgba(3,122,221,.88);}</style>			<style type="text/css" id="wp-custom-css">
				.entry ul li {
	list-style: disc;
}

.entry ol li {
	list-style: lower-roman;
}

			</style>
			</head>
	<body>
		<div class="page">
			<div id="header">
				<a href="../../../../index.html">Parerga und Paralipomena</a> / <span class="description">At the core of all well-founded belief lies belief that is unfounded &#8211; Wittgenstein</span><span style="float:right;"><a href="../../../../feed/index.html" title="">
						<img src="../../../../wp-content/themes/ub_modio/images/rss_black.png" alt="Parerga und Paralipomena Feed" width="14" height="14"/>
					</a>
				</span>
			</div><!-- end header --><div id="content" class="widecolumn">

		<div class="post" id="post-1734">
		<h2><a href="index.html" rel="bookmark" title="Permanent Link: Setting up the new &#8216;staticfiles&#8217; app on Django 1.3">Setting up the new &#8216;staticfiles&#8217; app on Django 1.3</a>
		</h2>
		<div class="entry">
				<p>Even if I&#8217;ve been using Django 1.3 for a while now, I&#8217;ve been holding off on some of it new features, such as the new way to handle static files via a <a href="https://docs.djangoproject.com/en/dev/howto/static-files/">new app</a> called (guess what) <span style="font-family:monospace;color:#000000; ">staticfiles</span> . Essentially, what the new static app does is allowing you to leave all static files within the <span style="font-family:monospace;color:#000000; ">/static</span> directory of each of the django apps you&#8217;re using. This is for development; when you&#8217;re deploying and (most likely) want these files to be served via a (faster) separate server process, the <span style="font-family:monospace;color:#000000; ">staticfiles</span> app helps you gather all of them into a predefined directory by using a handy shell command.</p>
<p>That&#8217;s the gist of it. I finally took a look at <span style="font-family:monospace;color:#000000; ">django.contrib.staticfiles</span> last week, so here&#8217;s a brief report on how to get it to work (p.s. a couple of related threads on stack overflow can be found <a href="http://stackoverflow.com/questions/7620307/how-do-i-serve-css-to-django-in-development">here</a> and <a href="http://stackoverflow.com/questions/4565935/django-staticfiles-app-help">here</a>).</p>
<h3>1. Set up the static and media paths settings</h3>
<p>My previous settings looked like this:</p>
<pre style='overflow:auto;color:#000000;background:#ffffff;'><span style='color:#3f7f59; '># the site root is one level up from where settings.py is</span>
SITE_ROOT = os.path.dirname(os.path.realpath(__file__)).rsplit(<span style='color:#2a00ff; '>'/'</span>, 1)[0]
MEDIA_ROOT = os.path.join(SITE_ROOT, <span style='color:#2a00ff; '>'static'</span>)
MEDIA_URL = <span style='color:#2a00ff; '>'/static/'</span>
ADMIN_MEDIA_PREFIX = <span style='color:#2a00ff; '>'/static/adminmedia1.3/'</span>
</pre>
<p>The media root contained all of my static files, some of which I had to copy in there manually, each time I added a new django app to my project. On the production server, the <span style="font-family:monospace;color:#000000; ">MEDIA_URL</span> is mapped to a local path (in the apache conf settings) that is essentially a duplicate of the <span style="font-family:monospace;color:#000000; ">/static</span> directory we have in the development server. The only difference, the static stuff is delivered directly by Apache, bypassing django (=so to make it faster). </p>
<p>The <strong>new way</strong> of declaring these variables is this instead:</p>
<pre style='overflow:auto;color:#000000;background:#ffffff;'>MEDIA_URL = <span style='color:#2a00ff; '>'/media/uploads/'</span>
STATIC_URL = <span style='color:#2a00ff; '>'/media/static/'</span>
ADMIN_MEDIA_PREFIX = <span style='color:#2a00ff; '>'/media/static/admin/'</span>

<span style='color:#3f7f59; '># Absolute path to the directory that holds media uploaded</span>
<span style='color:#3f7f59; '># I keep the uploads folder at the project-root level server</span>
MEDIA_ROOT = os.path.join(SITE_ROOT, <span style='color:#2a00ff; '>'uploads'</span>) 

<span style='color:#3f7f59; '># physical location of extra static files in development server</span>
STATICFILES_DIRS = (
    os.path.join(SITE_ROOT, <span style='color:#2a00ff; '>'myproject/static'</span>),
)
<span style='color:#3f7f59; '># path used with "python manage.py collectstatic"</span>
<span style='color:#3f7f59; '># I normally put this at the project-root level that contains also the wsgi files for apache</span>
STATIC_ROOT = os.path.join(SITE_ROOT, <span style='color:#2a00ff; '>'apache/static'</span>)
</pre>
<p>Obviously on a production server, you will have to set up the required aliases in the <a href="https://docs.djangoproject.com/en/dev/howto/deployment/wsgi/modwsgi/#serving-files">apache conf</a> file, so that <span style="font-family:monospace;color:#000000; ">MEDIA_URL</span> and <span style="font-family:monospace;color:#000000; ">STATIC_URL</span> are pointing at the right physical locations: </p>
<pre style='overflow:auto;color:#000000;background:#ffffff;'>Alias /media/uploads/ /path/to/mysite.com/uploads/
Alias /media/static/ /path/to/mysite.com/apache/static/
</pre>
<p>The <a href="https://docs.djangoproject.com/en/dev/howto/static-files/">django docs</a> explain the new approach with these words: </p>
<blockquote><p>In previous versions of Django, it was common to place static assets in MEDIA_ROOT along with user-uploaded files, and serve them both at MEDIA_URL. Part of the purpose of introducing the staticfiles app is to make it easier to keep static files separate from user-uploaded files.</p>
<p>For this reason, you need to make your MEDIA_ROOT and MEDIA_URL different from your STATIC_ROOT and STATIC_URL.</p>
<p>The STATIC_ROOT directory is not necessary in the development server: in fact  is only used if you call the collectstatic manangement command. It&#8217;s not needed to add the directory to the STATICFILES_DIRS setting to serve your static files!</p>
<p>Furthemore, the STATICFILES_DIRS variable tells Django of the location of static files which are not within specific applications. Mind that during the &#8216;collection&#8217; operations also these files will be copied into the STATIC_ROOT directory.</p></blockquote>
<p>&nbsp;</p>
<h3>2. Add context processors and the app</h3>
<p>Add the required context processor in <span style="font-family:monospace;color:#000000; ">setting.py</span>: </p>
<pre style='overflow:auto;color:#000000;background:#ffffff;'>TEMPLATE_CONTEXT_PROCESSORS += <span style='color:#2a00ff; '>'django.core.context_processors.static'</span></pre>
<p>Add also the new static app to your installed apps:</p>
<pre style='overflow:auto;color:#000000;background:#ffffff;'>INSTALLED_APPS = (
....    
    <span style='color:#2a00ff; '>'django.contrib.staticfiles'</span>,    
.....
)
</pre>
<blockquote><p>Keep in mind that it&#8217;s very likely that in your templates you will have to manually change all references to <span style="font-family:monospace;color:#000000; ">MEDIA_URL</span> into <span style="font-family:monospace;color:#000000; ">STATIC_URL</span>!</p></blockquote>
<p>&nbsp;</p>
<h3>3. Url configuration</h3>
<p>On your <strong>development</strong> server, this is what you would do:</p>
<pre style='overflow:auto;color:#000000;background:#ffffff;'><span style='color:#7f0055; font-weight:bold; '>from</span> django.contrib.staticfiles.urls <span style='color:#7f0055; font-weight:bold; '>import</span> staticfiles_urlpatterns
<span style='color:#3f7f59; '># ... the rest of your URLconf goes here ...</span>
urlpatterns += staticfiles_urlpatterns()
</pre>
<p>This will inspect your <span style="font-family:monospace;color:#000000; ">STATIC_URL</span> setting and wire up the view to serve static files accordingly. Don&#8217;t forget to set the <span style="font-family:monospace;color:#000000; ">STATICFILES_DIRS</span> setting appropriately to let <span style="font-family:monospace;color:#000000; ">django.contrib.staticfiles</span> know where to look for files additionally to files in app directories.</p>
<blockquote><p><strong>WARNING</strong>: the <span style="font-family:monospace;color:#000000; ">staticfiles_urlpatterns</span> helper function will only work if <span style="font-family:monospace;color:#000000; ">DEBUG</span> is True and your <span style="font-family:monospace;color:#000000; ">STATIC_URL</span> setting is neither empty nor a full URL such as http://static.example.com/ (more info <a href="https://docs.djangoproject.com/en/dev/ref/contrib/staticfiles/#staticfiles-development-view">here</a>).</p></blockquote>
<p>Finally, mind that in this new approach you will need to arrange for serving of files in <span style="font-family:monospace;color:#000000; ">MEDIA_ROOT</span> yourself; <strong>staticfiles does not deal with user-uploaded files at all</strong>. You can, however, use <span style="font-family:monospace;color:#000000; ">django.views.static.serve()</span> view for serving <span style="font-family:monospace;color:#000000; ">MEDIA_ROOT</span> in development (for more info see <a href="https://docs.djangoproject.com/en/dev/howto/static-files/#serving-other-directories">Serving other directories</a>).</p>
<pre style='overflow:auto;color:#000000;background:#ffffff;'><span style='color:#7f0055; font-weight:bold; '>if</span> settings.LOCAL_SERVER:     <span style='color:#3f7f59; '># ===> static files on local machine    </span>
    urlpatterns += patterns(<span style='color:#2a00ff; '>''</span>, 
        (<span style='color:#2a00ff; '>r'^media/uploads/(?P&lt;path>.*)$'</span>, <span style='color:#2a00ff; '>'django.views.static.serve'</span>, 
            {<span style='color:#2a00ff; '>'document_root'</span>: settings.MEDIA_ROOT, <span style='color:#2a00ff; '>'show_indexes'</span>: True}),
        )
</pre>
<p>In the end, I conflated the two things into this code (ps I&#8217;ve added a variable called <span style="font-family:monospace;color:#000000; ">LOCAL_SERVER</span> to quickly see which platform I&#8217;m on):</p>
<pre style='overflow:auto;color:#000000;background:#ffffff;'><span style='color:#7f0055; font-weight:bold; '>if</span> settings.LOCAL_SERVER:     <span style='color:#3f7f59; '># ===> static files on local machine</span>
    <span style='color:#7f0055; font-weight:bold; '>from</span> django.contrib.staticfiles.urls <span style='color:#7f0055; font-weight:bold; '>import</span> staticfiles_urlpatterns
    urlpatterns += staticfiles_urlpatterns()    
    urlpatterns += patterns(<span style='color:#2a00ff; '>''</span>, 
        (<span style='color:#2a00ff; '>r'^media/uploads/(?P&lt;path>.*)$'</span>, <span style='color:#2a00ff; '>'django.views.static.serve'</span>, 
            {<span style='color:#2a00ff; '>'document_root'</span>: settings.MEDIA_ROOT, <span style='color:#2a00ff; '>'show_indexes'</span>: True}),
        )
</pre>
<p>&nbsp;</p>
<h3>4. On your production server</h3>
<p>Easy: in your urlconf there&#8217;s no need to do anything, as static urls are usually handled by Apache directly. However for that to happen what you have to do is collect all static files into the directory that apache is looking into, that is, the one specified with the <span style="font-family:monospace;color:#000000; ">STATIC_ROOT</span> setting. This is how you do it: </p>
<blockquote><p><code><font size="2" face="Courier New" color="black">python manage.py collectstatic</font></code></p></blockquote>
<p>This shell command will<br />
a) look in the <span style="font-family:monospace;color:#000000; ">/static/</span> directory of each of the apps of yours <span style="font-family:monospace;color:#000000; ">INSTALLED_APPS</span> setting.<br />
b) look in directories you specify in the <span style="font-family:monospace;color:#000000; ">STATICFILES_DIRS</span> setting.</p>
<p>…and copy whatever it finds into the <span style="font-family:monospace;color:#000000; ">STATIC_ROOT</span> directory, as defined in your settings (ps: it&#8217;ll preserve the original directory structure). </p>
<p>That&#8217;s all folks!</p>
<p>&nbsp;</p>
				
			<!-- <script src="http://digg.com/tools/diggthis.js" type="text/javascript"></script> -->
			<!-- AddToAny BEGIN -->
			<a class="a2a_dd" href="http://www.addtoany.com/share_save"><img src="http://static.addtoany.com/buttons/share_save_256_24.png" width="256" height="24" border="0" alt="Share/Bookmark"/></a>
			<script type="text/javascript" src="http://static.addtoany.com/menu/page.js"></script>
			<!-- AddToAny END -->
			
			
						</div><!-- end entry --><br/><br/>
	</div><!-- end post -->
	<ul class="post">
		<li><b>META</b> / ABOUT THIS POST</li>
		<li>This entry was posted
									on Tuesday, January 24th, 2012 at 10:26 am			and is filed under <a href="../../../../category/techlife/index.html" rel="category tag">TechLife</a>, <a href="../../../../category/tips-and-tricks/index.html" rel="category tag">Tips and Tricks</a>. Tags: <a href="../../../../tag/django/index.html" rel="tag">django</a>, <a href="../../../../tag/static/index.html" rel="tag">static</a>.
			You can follow any responses to this entry through the <a href="feed/index.html">RSS 2.0</a> feed.

									Both comments and pings are currently closed.

								</li>
	</ul><br/><br/>
	<ul class="post">
		<li><b>PAGES</b> / FORWARD OR BACK?</li>
		<li>Previous: <a href="../../13/special-issue-of-cmj-dvd-on-livecoding/index.html" rel="prev">Special issue of CMJ DVD on livecoding</a></li>
		<li>Next: <a href="../../../02/08/html5-canvas-cookbook/index.html" rel="next">HTML5 Canvas Cookbook</a></li>
	</ul><br/><br/>
					
							
			
	
<!-- You can start editing here. -->


			<!-- If comments are closed. -->
<p class="nocomments">Comments are closed.</p>

	


	</div><!-- end content -->	
<div id="sidebar">


	<p class="menu"><B>INSIDE&nbsp;&nbsp;&nbsp;&nbsp;&larr;</b></p><br/>
		<p><a href="../../../../index.html">Parerga und Paralipomena</a></p>
		<li id="pages-2" class="widget widget_pages"><h2 class="widgettitle">Pages</h2>
		<ul>
			<li class="page_item page-item-532"><a href="../../../../about-2/index.html">About Me</a></li>
<li class="page_item page-item-3355"><a href="../../../../latest-from-twitter/index.html">Latest from Twitter</a></li>
		</ul>
			</li>
<li id="categories-2" class="widget widget_categories"><h2 class="widgettitle">Categories</h2>
		<ul>
				<li class="cat-item cat-item-408"><a href="../../../../category/computermusic/index.html">Computer Music</a>
</li>
	<li class="cat-item cat-item-3"><a href="../../../../category/culturalinformatics/index.html">Cultural Informatics</a>
</li>
	<li class="cat-item cat-item-455"><a href="../../../../category/data-science/index.html">Data science</a>
</li>
	<li class="cat-item cat-item-4"><a href="../../../../category/informationarchitecture/index.html">Information Architecture</a>
</li>
	<li class="cat-item cat-item-5"><a href="../../../../category/justblogging/index.html">Just Blogging</a>
</li>
	<li class="cat-item cat-item-6"><a href="../../../../category/semantic-web/index.html">Semantic Web</a>
</li>
	<li class="cat-item cat-item-7"><a href="../../../../category/techlife/index.html">TechLife</a>
</li>
	<li class="cat-item cat-item-8"><a href="../../../../category/tips-and-tricks/index.html">Tips and Tricks</a>
</li>
		</ul>
			</li>
 
		
		<!-- mikele: the stuff above doesn't get activated so I put it here -->
<br/><br/>
		<ul style="text-align:right;">

			<p><b>FIND</b> / SEARCH</p>
			<form method="get" id="search_form" action="../../../../index.html">
				<input type="text" class="search_input" value="Type and hit enter..." name="s" id="s" onfocus="if (this.value == 'Type and hit enter...') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Type and hit enter...';}" />
				<input type="hidden" id="searchsubmit" value="Search" />
			</form>
		</ul><br/>


<!-- 	
		<!-- mikele: adsense 
		<br/>
                 <ul style="text-align:right;">
		<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

		<ins class="adsbygoogle"
		     style="display:block"
		     data-ad-client="ca-pub-8108687655438913"
		     data-ad-slot="2230044782"
		     data-ad-format="auto"></ins>
		<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
		</script>
                </ul><br/> 
-->

		
		
		
	</div><!-- end sidebar --><div class="footer">
	<p><b>FOOTER</b> / LEST WE FORGET<br/>
<!-- If you'd like to support WordPress, having the "powered by" link someone on your blog is the best way, it's our only promotion or advertising. -->

<!-- Change this theme as you wish, but PLEASE keep a visible link to http://www.upstartblogger.com/ somewhere on every page of your blog (for example, in the sidebar or footer). You aren't going to delete the WordPress link, are you? Please don't delete mine. Thanks! -->
		Copyright &copy; 2004-2007 by Parerga und Paralipomena, unless otherwise noted. All rights reserved. Powered by <a href="http://wordpress.org/" title="WordPress">WordPress</a>. Original Modio theme by <a href="http://www.upstartblogger.com/" title="Upstart Blogger">Upstart Blogger</a>, modified by Michele Pasin.






</p>
	<!-- 40 queries. 0.295 seconds. -->





</div><!-- end footer -->

<!-- Start of Flickr Badge -->
<style type="text/css">
#flickr_badge_source_txt {padding:0; font: 11px Arial, Helvetica, Sans serif; color:#666666;}
#flickr_badge_icon {display:block !important; margin:0 !important; border: 1px solid rgb(0, 0, 0) !important;}
#flickr_icon_td {padding:0 5px 0 0 !important;}
.flickr_badge_image {text-align:center !important;}
.flickr_badge_image img {border: 1px solid black !important;}
#flickr_www {display:block; padding:0 10px 0 10px !important; font: 11px Arial, Helvetica, Sans serif !important; color:#3993ff !important;}
#flickr_badge_uber_wrapper table {margin-left:265px; margin-top:50px; position:absolute;}
#flickr_badge_uber_wrapper a:hover,
#flickr_badge_uber_wrapper a:link,
#flickr_badge_uber_wrapper a:active,
#flickr_badge_uber_wrapper a:visited {text-decoration:none !important; background:inherit !important;color:#3993ff;}
#flickr_badge_wrapper {background-color:#ffffff;border: solid 1px #000000}
#flickr_badge_source {padding:0 !important; font: 11px Arial, Helvetica, Sans serif !important; color:#666666 !important;}
</style>
<table id="flickr_badge_uber_wrapper" cellpadding="0" cellspacing="10" border="0"><tr><td><table cellpadding="0" cellspacing="10" border="0" id="flickr_badge_wrapper">
<tr>
<script type="text/javascript" src="http://www.flickr.com/badge_code_v2.gne?count=5&display=random&size=s&layout=h&source=user&user=76186999%40N00"></script>
</tr>
</table>
</td></tr></table>
<!-- End of Flickr Badge -->


</div><!-- end page -->
<!-- Powered by WPtouch: 4.3.39 -->	<div style="display:none">
	</div>
<script type='text/javascript' src='https://secure.gravatar.com/js/gprofiles.js?ver=2021Augaa'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var WPGroHo = {"my_hash":""};
/* ]]> */
</script>
<script type='text/javascript' src='../../../../wp-content/plugins/jetpack/modules/wpgroho.js%3Fver=5.2.11'></script>
<script type='text/javascript' src='../../../../wp-includes/js/wp-embed.min.js%3Fver=5.2.11'></script>
<script type='text/javascript' src='https://stats.wp.com/e-202134.js' async='async' defer='defer'></script>
<script type='text/javascript'>
	_stq = window._stq || [];
	_stq.push([ 'view', {v:'ext',j:'1:8.1.2',blog:'13825966',post:'1734',tz:'0',srv:'www.michelepasin.org'} ]);
	_stq.push([ 'clickTrackerInit', '13825966', '1734' ]);
</script>
</body>
</html>