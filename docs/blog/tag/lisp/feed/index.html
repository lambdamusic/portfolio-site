<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	
	xmlns:georss="http://www.georss.org/georss"
	xmlns:geo="http://www.w3.org/2003/01/geo/wgs84_pos#"
	>

<channel>
	<title>lisp &#8211; Parerga und Paralipomena</title>
	<atom:link href="http://www.michelepasin.org/blog/tag/lisp/feed/" rel="self" type="application/rss+xml" />
	<link>http://www.michelepasin.org/blog</link>
	<description>At the core of all well-founded belief lies belief that is unfounded - Wittgenstein</description>
	<lastBuildDate>Wed, 10 Oct 2012 14:59:57 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	<generator>https://wordpress.org/?v=5.2.11</generator>
<site xmlns="com-wordpress:feed-additions:1">13825966</site>	<item>
		<title>Composing at the metalevel</title>
		<link>http://www.michelepasin.org/blog/2012/03/09/composing-at-the-metalevel/</link>
				<comments>http://www.michelepasin.org/blog/2012/03/09/composing-at-the-metalevel/#comments</comments>
				<pubDate>Fri, 09 Mar 2012 12:20:17 +0000</pubDate>
		<dc:creator><![CDATA[mikele]]></dc:creator>
				<category><![CDATA[Computer Music]]></category>
		<category><![CDATA[algorithmiccomposition]]></category>
		<category><![CDATA[books]]></category>
		<category><![CDATA[composition]]></category>
		<category><![CDATA[lisp]]></category>
		<category><![CDATA[taube]]></category>

		<guid isPermaLink="false">http://www.michelepasin.org/blog/?p=1109</guid>
				<description><![CDATA[I&#8217;ve started reading &#8220;Notes from the Metalevel: An Introduction to Computer Composition&#8220;, by Heinrich Taube, and realised I should have done that a long time ago! Notes From the Metalevel is a practical introduction to computer composition. It is primarily intended for student composers interested in learning how computation can provide them with a new [&#8230;]]]></description>
								<content:encoded><![CDATA[<p>I&#8217;ve started reading &#8220;<a href="http://www.routledge.com/books/details/9789026519758/">Notes from the Metalevel: An Introduction to Computer Composition</a>&#8220;, by Heinrich Taube, and realised I should have done that a long time ago! </p>
<p><img src="http://images.tandf.co.uk/common/jackets/weblarge/978902651/9789026519758.jpg" /></p>
<blockquote><p>Notes From the Metalevel is a practical introduction to computer composition. It is primarily intended for student composers interested in learning how computation can provide them with a new paradigm for musical composition.
</p></blockquote>
<p>I happened to have a pdf version of the book, but the good news is that there&#8217;s an <a href="http://www.moz.ac.at/sem/lehre/lib/bib/software/cm/Notes_from_the_Metalevel/index.html">html version of it</a> too, which includes also all the midi files of the numerous examples included in the book. So make sure you check that out, if you&#8217;re interested in computer-based composition. You might also be interested in this <a href="http://www.computermusicjournal.org/reviews/29-3/phillips-taube.html">review on computer music journal</a>, and this <a href="http://camil.music.illinois.edu/Classes/404A1/">course materials</a> from Taube&#8217;s class at Illinois. </p>
<p>The preface to the fist chapter contains this suggestive excerpt from Leonard Schlain&#8217;s book, <em><a href="http://www.alphabetvsgoddess.com/index.html">The Alphabet Versus the Goddess</a></em>, which Taube (page 19-20) uses as a metaphor of what algorithmic composition (i.e., metalevel composition) is::</p>
<blockquote><p>&#8220;<em>The one crowded space in Father Perry&#8217;s house was his bookshelves. I gradually came to understand that the marks on the pages were trapped words. Anyone could learn to decipher the symbols and turn the trapped words loose again into speech. The ink of the print trapped the thoughts; they could no more get away than a doomboo could get out of a pit. When the full realization of what this meant flooded over me, I experienced the same thrill and amazement as when I had my first glimpse of the bright lights of Konakry. I shivered with the intensity of my desire to learn to do this wondrous thing myself.</em>&#8221;<br />
(spoken by Prince Modupe, a west African prince who learned to read as an adult)</p>
<p>It is impossible to know exactly how Prince Modupe felt when he discovered a process by which his very thoughts could be trapped and released at will again into speech. But I think his <strong>epiphany</strong> must be close to what I experienced when, as a young composer, I was first shown how I could <strong>use a computer to represent my musical ideas</strong> and then &#8220;release them&#8221; into musical compositions.<br />
At that instant it became clear to me that there was an <strong>entire level of notation above the scores</strong> that I had been writing in my regular composition classes, a level I knew nothing about! But I could see that in this level it was possible to notate my compositional ideas in a precise manner and work with them in an almost physical way, as &#8220;trapped words&#8221; that could be unleashed into musical sound whenever I wanted.
</p></blockquote>
<p>So what does it meant to compose at the meta level? </p>
<blockquote><p>
Given the existence of the acoustic and score representations one might ask if there is yet another representation that constitutes a level of abstraction above the performance score? The answer, of course, is yes; it is what this book terms the metalevel. If the score represents the composition then <strong>the metalevel represents the composition of the composition</strong>. A metalevel representation of music is concerned with representing the activity, or process, of musical composition as opposed to its artifact, or score.</p>
<p>This book is about <strong>using the computer to instantiate this level</strong>: to define, model and represent the compositional processes, formalism and structures that are articulated in a musical score and acoustic performance but are not literally represented there. By using a computer the composer can work with <strong>an explicit metalevel notation, or language, that makes the metalevel as tangible as the performance and acoustic levels</strong>.
</p></blockquote>
<p>&nbsp;</p>
]]></content:encoded>
							<wfw:commentRss>http://www.michelepasin.org/blog/2012/03/09/composing-at-the-metalevel/feed/</wfw:commentRss>
		<slash:comments>1</slash:comments>
						<post-id xmlns="com-wordpress:feed-additions:1">1109</post-id>	</item>
		<item>
		<title>RDF programming with AllegroCL and AllegroGraph</title>
		<link>http://www.michelepasin.org/blog/2011/04/14/allegro-cl-graph/</link>
				<pubDate>Thu, 14 Apr 2011 14:19:46 +0000</pubDate>
		<dc:creator><![CDATA[mikele]]></dc:creator>
				<category><![CDATA[Semantic Web]]></category>
		<category><![CDATA[TechLife]]></category>
		<category><![CDATA[ide]]></category>
		<category><![CDATA[lisp]]></category>
		<category><![CDATA[triplestore]]></category>

		<guid isPermaLink="false">http://www.michelepasin.org/blog/?p=1274</guid>
				<description><![CDATA[Allegro Common Lisp (wikipedia) is a commercial implementation of the Common Lisp programming language developed by Franz Inc. Allegro CL provides the full ANSI Common Lisp standard &#8211; but more interestingly for me, it also provides a very comprehensive suite of tools for semantic web programming. So I decided to give it a go, in [&#8230;]]]></description>
								<content:encoded><![CDATA[<p>Allegro Common Lisp (<a href="http://en.wikipedia.org/wiki/Allegro_Common_Lisp">wikipedia</a>) is a commercial implementation of the <a href="http://en.wikipedia.org/wiki/Common_Lisp">Common Lisp</a> programming language developed by <a href="http://www.franz.com/">Franz Inc</a>. Allegro CL provides the full ANSI Common Lisp standard &#8211; but more interestingly for me, it also provides a very comprehensive suite of tools for semantic web programming. So I decided to give it a go, in what follows I just put together some notes on how to get started quickly.</p>
<p>Franz Inc. offers a whole bunch of semantic technologies, including: </p>
<li><strong>AllegroCL</strong>: a Common <strong>Lisp implementation </strong>(<a href="http://www.franz.com/products/allegro-common-lisp/">homepage</a> | <a href="http://www.franz.com/downloads/clp/validate_survey">install</a> | <a href="http://www.franz.com/support/faq//">faq</a> | <a href="http://www.franz.com/support/documentation/8.2/doc/introduction.htm">documentation</a>) described as the &#8220;<em>most powerful dynamic object-oriented development system available today</em>&#8220;. It runs on all major operating systems, and it includes a cross-platform GUI too (which is not always the case for Lisp implementations!).</li>
<li><strong>AllegroGraph</strong>: (<a href="http://www.franz.com/agraph/allegrograph/">home</a> | <a href="http://www.franz.com/agraph/support/documentation/v4/agraph-introduction.html">docs</a> | <a href="http://www.franz.com/agraph/downloads/">install</a>) this is a high-performance, persistent RDF <strong>triplestore</strong>. It allegedly can &#8220;<em>scale to billions of triples while maintaining superior performance</em>&#8221; and supports SPARQL, RDFS++, and Prolog reasoning from numerous client applications (python too, as discussed in a <a href="http://www.michelepasin.org/blog/2011/02/24/survey-of-pythonic-tools-for-rdf-and-linked-data-programming/">previous post</a>).</li>
<li><strong>AllegroCache</strong>: (<a href="http://www.franz.com/products/allegrocache/">home</a> | <a href="http://www.franz.com/products/allegrocache/acache_docs.lhtml">docs</a> | <a href="http://www.franz.com/products/allegrocache/download/dist/download">install</a>) this is a dynamic object caching <strong>database</strong> system. It allows programmers to work directly with objects as if they were in memory while in fact the object data is always stored persistently. It supports a full transaction model with long and short transactions, and meets the classic ACID requirements for a reliable and robust database. </li>
<li><strong>Gruff</strong>: (<a href="http://www.franz.com/agraph/gruff/">home</a> | <a href="http://www.franz.com/agraph/gruff/gruff_documentation.html">docs</a> | <a href="http://www.franz.com/agraph/gruff/index.lhtml#download">install</a>) is an rdf <strong>graphical browser</strong> that attempts to make data retrieval more pleasant and powerful with a variety of tools for laying out cyclical graphs, displaying tables of properties, managing queries, and building queries as visual diagrams (btw thanks to <a href="http://twitter.com/mr56k">Matteo</a> for mentioning Gruff to me!)</li>
<h3>Installing AllegroCL</h3>
<p>The <strong>good news</strong> is that if you follow the installation instructions for AllegroCL, this will include also AllegroGraph and AllegroCache. Long story short, I was able to get started with this environment <em>surprisingly</em> quickly. The <a href="http://www.franz.com/downloads/clp/validate_survey">installation</a> on OSX involves only two steps (after filling out a form): getting the GTK+ framework (a <a href="http://en.wikipedia.org/wiki/GTK%2B">cross-platform graphical toolkit</a>) and then downloading the Lisp image. Double-click, install, and et-voila&#8217; you&#8217;re done with it.</p>
<p>Here&#8217;s how the Lisp IDE looks like: </p>
<p><a href="http://www.michelepasin.org/blog/wp-content/uploads/2011/04/Screen-shot-2011-04-14-at-13.46.491.png"><img src="http://www.michelepasin.org/blog/wp-content/uploads/2011/04/Screen-shot-2011-04-14-at-13.46.491.png" alt="Screen shot 2011 04 14 at 13 46 49" border="0" width="400" height="300" /></a></p>
<p>The IDE includes also an integrated patches-loading tool, which you should run straightaway to get the latest versions of several libraries needed by AllegroCL (wonder whether it&#8217;s <em>that</em> easy to install all the standard Lisp packages too..):</p>
<p><a href="http://www.michelepasin.org/blog/wp-content/uploads/2011/04/Screen-shot-2011-04-14-at-13.31.431.png"><img src="http://www.michelepasin.org/blog/wp-content/uploads/2011/04/Screen-shot-2011-04-14-at-13.31.431.png" alt="Screen shot 2011 04 14 at 13 31 43" border="0" width="400" height="300" /></a></p>
<p>Finally, in order to run AllegroGraph too it&#8217;s necessary to invoke an update command manually, which is easily done:</p>
<pre style='color:#000020;background:#f6f8ff; overflow:auto;'>CG-USER<span style='color:#308080; '>(</span><span style='color:#200080; font-weight:bold; '>3</span><span style='color:#308080; '>)</span><span style='color:#400000; '>:</span> <span style='color:#308080; '>(</span><span style='color:#200080; font-weight:bold; '>SYSTEM.UPDATE:INSTALL-ALLEGROGRAPH</span><span style='color:#308080; '>)</span>
Checking available AllegroGraph versions<span style='color:#308080; '>.</span><span style='color:#308080; '>.</span><span style='color:#308080; '>.</span>
Making temporary directory <span style='color:#308080; '>(</span><span style='color:#200080; font-weight:bold; '>/tmp/tempa18825120705a/</span><span style='color:#308080; '>)</span>
Retrieving agraph-<span style='color:#008000; '>3.3</span>-acl8<span style='color:#308080; '>.</span><span style='color:#008c00; '>2</span>-macosx86<span style='color:#308080; '>.</span>tgz into temporary directory
Extracting tar archive <span style='color:#308080; '>/</span>tmp<span style='color:#308080; '>/</span>tempa18825120705a<span style='color:#308080; '>/</span>agraph-<span style='color:#008000; '>3.3</span>-acl8<span style='color:#308080; '>.</span><span style='color:#008c00; '>2</span>-macosx86<span style='color:#308080; '>.</span>tgz
Installing <span style='color:#308080; '>/</span>Applications<span style='color:#308080; '>/</span>AllegroCL<span style='color:#308080; '>/</span>code<span style='color:#308080; '>/</span>agraph<span style='color:#308080; '>.</span>fasl
Installing <span style='color:#308080; '>/</span>Applications<span style='color:#308080; '>/</span>AllegroCL<span style='color:#308080; '>/</span>agraph<span style='color:#308080; '>/</span>

*********************

To use the newly downloaded AllegroGraph you can load it by
evaluating the following forms<span style='color:#400000; '>:</span>

  <span style='color:#308080; '>(</span><span style='color:#200080; font-weight:bold; '>REQUIRE</span> <span style='color:#400000; '>:AGRAPH</span><span style='color:#308080; '>)</span>

Ancillary files are located in ``<span style='color:#308080; '>/</span>Applications<span style='color:#308080; '>/</span><span style='color:#308080; '>/</span>AllegroCL<span style='color:#308080; '>/</span>agraph<span style='color:#308080; '>/</span><span style='color:#406080; '>'</span><span style='color:#406080; '>'</span><span style='color:#308080; '>.</span>
</pre>
<h3>Installing Gruff</h3>
<p>I also downloaded <a href="http://www.franz.com/agraph/gruff/">Gruff</a> and ran it. Again, on OSx the whole process was very very straightforward. I loaded up an ontology stored in an RDF/XML file and here&#8217;s the result:</p>
<p><a href="http://www.michelepasin.org/blog/wp-content/uploads/2011/04/Screen-shot-2011-04-14-at-14.18.561.png"><img src="http://www.michelepasin.org/blog/wp-content/uploads/2011/04/Screen-shot-2011-04-14-at-14.18.561.png" alt="Screen shot 2011 04 14 at 14 18 56" border="0" width="400" height="300" /></a></p>
<p>Very very impressive &#8211; that&#8217;s my conclusion. <a href="http://www.franz.com/agraph/gruff/">Gruff</a> offers plenty of features for viewing and also editing the rdf graph (check out the <a href="http://www.franz.com/agraph/gruff/index.lhtml#download">video tutorials on the homepage</a>); with a little practice, I think it wouldn&#8217;t be that difficult to use it for creating rdf models by hand (eg as an alternative to tools like Protege). The main advantage in my view is that it&#8217;s highly interactive: being able to switch very quickly from a graph-view to a tabular one is extremely practical when inspecting or creating an rdf model.</p>
<h3>Time to write some code</h3>
<p>Haven&#8217;t been writing Lisp in a while, but since we&#8217;ve got till here it would be a shame not to get our hands dirty a little, right?</p>
<li><strong>Tip</strong>: a nice folk named <a href="http://www.markwatson.com/">Mark Watson</a> has written a couple of books that show how to use Allegro Graph, and he&#8217;s making them available for free on his website (thanks!). Check them out: <a href="http://www.markwatson.com/opencontent/book_lisp.pdf">Practical Semantic Web and Linked Data Applications, Common Lisp Edition</a>, and <a href="http://www.markwatson.com/opencontent/book_java.pdf">Practical Semantic Web and Linked Data Applications, Java, Scala, Clojure, and JRuby Edition</a> </li>
<p>I had a quick look at the first book mentioned (&#8220;<em>Practical Semantic Web and Linked Data Applications, Common Lisp Edition</em>&#8220;), and tried to follow the examples presented. Here&#8217;s the result..</p>
<p>First, let&#8217;s load up AllegroGraph from AllegroCL and set up a Lisp reader macro (named &#8216;!&#8217;) that makes it easier to enter URIs and literals: </p>
<pre style='color:#000020;background:#f6f8ff; overflow:auto; height:300px;'>CG-USER<span style='color:#308080; '>(</span><span style='color:#200080; font-weight:bold; '>2</span><span style='color:#308080; '>)</span><span style='color:#400000; '>:</span> <span style='color:#308080; '>(</span><span style='color:#200080; font-weight:bold; '>REQUIRE</span> <span style='color:#400000; '>:AGRAPH</span><span style='color:#308080; '>)</span>
<span style='color:#595979; '>; Fast loading /Applications/AllegroCL/code/AGRAPH.fasl</span>
<span style='color:#595979; '>;   Fast loading</span>
<span style='color:#595979; '>;      /Applications/AllegroCL/code/acache-2.1.12.fasl</span>
AllegroCache version <span style='color:#008000; '>2.1</span><span style='color:#308080; '>.</span><span style='color:#008c00; '>12</span>
<span style='color:#595979; '>;     Fast loading /Applications/AllegroCL/code/SAX.001</span>
<span style='color:#595979; '>;;; Installing sax patch, version 1.</span>
<span style='color:#595979; '>;       Fast loading from bundle code/ef-e-anynl.fasl.</span>
<span style='color:#595979; '>;         Fast loading from bundle code/ef-e-crlf.fasl.</span>
<span style='color:#595979; '>;         Fast loading from bundle code/ef-e-cr.fasl.</span>
<span style='color:#595979; '>;   Fast loading from bundle code/streamp.fasl.</span>
<span style='color:#595979; '>;   Fast loading /Applications/AllegroCL/code/ACLRPC.fasl</span>
Loaded patch file <span style='color:#308080; '>/</span>Applications<span style='color:#308080; '>/</span>AllegroCL<span style='color:#308080; '>/</span>update<span style='color:#308080; '>/</span>pim001<span style='color:#308080; '>.</span><span style='color:#008c00; '>001</span><span style='color:#308080; '>.</span>
<span style='color:#595979; '>;   Fast loading /Applications/AllegroCL/code/PROLOG.001</span>
<span style='color:#595979; '>;;; Installing prolog patch, version 1.</span>
<span style='color:#595979; '>;   Fast loading /Applications/AllegroCL/code/DATETIME.001</span>
<span style='color:#595979; '>;;; Installing datetime patch, version 1.</span>
<span style='color:#595979; '>;   Fast loading /Applications/AllegroCL/code/streamc.002</span>
<span style='color:#595979; '>;;; Installing streamc patch, version 2.</span>
<span style='color:#595979; '>;     Fast loading from bundle code/efft-utf8-base.fasl.</span>
<span style='color:#595979; '>;     Fast loading from bundle code/efft-void.fasl.</span>
<span style='color:#595979; '>;     Fast loading from bundle code/efft-latin1-base.fasl.</span>
<span style='color:#595979; '>;   Fast loading from bundle code/streamm.fasl.</span>
<span style='color:#595979; '>;   Fast loading from bundle code/ef-e-crcrlf.fasl.</span>
Loaded patch file <span style='color:#308080; '>/</span>Applications<span style='color:#308080; '>/</span>AllegroCL<span style='color:#308080; '>/</span>update<span style='color:#308080; '>/</span>agraph<span style='color:#308080; '>/</span><span style='color:#008000; '>3.3</span><span style='color:#308080; '>/</span>pio001<span style='color:#308080; '>.</span><span style='color:#008c00; '>001</span><span style='color:#308080; '>.</span>
Loaded patch file <span style='color:#308080; '>/</span>Applications<span style='color:#308080; '>/</span>AllegroCL<span style='color:#308080; '>/</span>update<span style='color:#308080; '>/</span>agraph<span style='color:#308080; '>/</span><span style='color:#008000; '>3.3</span><span style='color:#308080; '>/</span>pio002<span style='color:#308080; '>.</span><span style='color:#008c00; '>001</span><span style='color:#308080; '>.</span>
Loaded patch file <span style='color:#308080; '>/</span>Applications<span style='color:#308080; '>/</span>AllegroCL<span style='color:#308080; '>/</span>update<span style='color:#308080; '>/</span>agraph<span style='color:#308080; '>/</span><span style='color:#008000; '>3.3</span><span style='color:#308080; '>/</span>pio003<span style='color:#308080; '>.</span><span style='color:#008c00; '>001</span><span style='color:#308080; '>.</span>
Loaded patch file <span style='color:#308080; '>/</span>Applications<span style='color:#308080; '>/</span>AllegroCL<span style='color:#308080; '>/</span>update<span style='color:#308080; '>/</span>agraph<span style='color:#308080; '>/</span><span style='color:#008000; '>3.3</span><span style='color:#308080; '>/</span>pio004<span style='color:#308080; '>.</span><span style='color:#008c00; '>001</span><span style='color:#308080; '>.</span>
Loaded patch file <span style='color:#308080; '>/</span>Applications<span style='color:#308080; '>/</span>AllegroCL<span style='color:#308080; '>/</span>update<span style='color:#308080; '>/</span>agraph<span style='color:#308080; '>/</span><span style='color:#008000; '>3.3</span><span style='color:#308080; '>/</span>pio005<span style='color:#308080; '>.</span><span style='color:#008c00; '>001</span><span style='color:#308080; '>.</span>
Loaded patch file <span style='color:#308080; '>/</span>Applications<span style='color:#308080; '>/</span>AllegroCL<span style='color:#308080; '>/</span>update<span style='color:#308080; '>/</span>agraph<span style='color:#308080; '>/</span><span style='color:#008000; '>3.3</span><span style='color:#308080; '>/</span>pio006<span style='color:#308080; '>.</span><span style='color:#008c00; '>001</span><span style='color:#308080; '>.</span>
Loaded patch file <span style='color:#308080; '>/</span>Applications<span style='color:#308080; '>/</span>AllegroCL<span style='color:#308080; '>/</span>update<span style='color:#308080; '>/</span>agraph<span style='color:#308080; '>/</span><span style='color:#008000; '>3.3</span><span style='color:#308080; '>/</span>pio007<span style='color:#308080; '>.</span><span style='color:#008c00; '>001</span><span style='color:#308080; '>.</span>
Loaded patch file <span style='color:#308080; '>/</span>Applications<span style='color:#308080; '>/</span>AllegroCL<span style='color:#308080; '>/</span>update<span style='color:#308080; '>/</span>agraph<span style='color:#308080; '>/</span><span style='color:#008000; '>3.3</span><span style='color:#308080; '>/</span>pio008<span style='color:#308080; '>.</span><span style='color:#008c00; '>001</span><span style='color:#308080; '>.</span>
Loaded patch file <span style='color:#308080; '>/</span>Applications<span style='color:#308080; '>/</span>AllegroCL<span style='color:#308080; '>/</span>update<span style='color:#308080; '>/</span>agraph<span style='color:#308080; '>/</span><span style='color:#008000; '>3.3</span><span style='color:#308080; '>/</span>pio009<span style='color:#308080; '>.</span><span style='color:#008c00; '>001</span><span style='color:#308080; '>.</span>
Loaded patch file <span style='color:#308080; '>/</span>Applications<span style='color:#308080; '>/</span>AllegroCL<span style='color:#308080; '>/</span>update<span style='color:#308080; '>/</span>agraph<span style='color:#308080; '>/</span><span style='color:#008000; '>3.3</span><span style='color:#308080; '>/</span>pio010<span style='color:#308080; '>.</span><span style='color:#008c00; '>001</span><span style='color:#308080; '>.</span>
Loaded patch file <span style='color:#308080; '>/</span>Applications<span style='color:#308080; '>/</span>AllegroCL<span style='color:#308080; '>/</span>update<span style='color:#308080; '>/</span>agraph<span style='color:#308080; '>/</span><span style='color:#008000; '>3.3</span><span style='color:#308080; '>/</span>pio011<span style='color:#308080; '>.</span><span style='color:#008c00; '>001</span><span style='color:#308080; '>.</span>
Loaded patch file <span style='color:#308080; '>/</span>Applications<span style='color:#308080; '>/</span>AllegroCL<span style='color:#308080; '>/</span>update<span style='color:#308080; '>/</span>agraph<span style='color:#308080; '>/</span><span style='color:#008000; '>3.3</span><span style='color:#308080; '>/</span>pio012<span style='color:#308080; '>.</span><span style='color:#008c00; '>001</span><span style='color:#308080; '>.</span>
Loaded patch file <span style='color:#308080; '>/</span>Applications<span style='color:#308080; '>/</span>AllegroCL<span style='color:#308080; '>/</span>update<span style='color:#308080; '>/</span>agraph<span style='color:#308080; '>/</span><span style='color:#008000; '>3.3</span><span style='color:#308080; '>/</span>pio013<span style='color:#308080; '>.</span><span style='color:#008c00; '>001</span><span style='color:#308080; '>.</span>
Loaded patch file <span style='color:#308080; '>/</span>Applications<span style='color:#308080; '>/</span>AllegroCL<span style='color:#308080; '>/</span>update<span style='color:#308080; '>/</span>agraph<span style='color:#308080; '>/</span><span style='color:#008000; '>3.3</span><span style='color:#308080; '>/</span>pio014<span style='color:#308080; '>.</span><span style='color:#008c00; '>001</span><span style='color:#308080; '>.</span>
Loaded patch file <span style='color:#308080; '>/</span>Applications<span style='color:#308080; '>/</span>AllegroCL<span style='color:#308080; '>/</span>update<span style='color:#308080; '>/</span>agraph<span style='color:#308080; '>/</span><span style='color:#008000; '>3.3</span><span style='color:#308080; '>/</span>pio015<span style='color:#308080; '>.</span><span style='color:#008c00; '>001</span><span style='color:#308080; '>.</span>
Loaded patch file <span style='color:#308080; '>/</span>Applications<span style='color:#308080; '>/</span>AllegroCL<span style='color:#308080; '>/</span>update<span style='color:#308080; '>/</span>agraph<span style='color:#308080; '>/</span><span style='color:#008000; '>3.3</span><span style='color:#308080; '>/</span>pio016<span style='color:#308080; '>.</span><span style='color:#008c00; '>001</span><span style='color:#308080; '>.</span>
Loaded patch file <span style='color:#308080; '>/</span>Applications<span style='color:#308080; '>/</span>AllegroCL<span style='color:#308080; '>/</span>update<span style='color:#308080; '>/</span>agraph<span style='color:#308080; '>/</span><span style='color:#008000; '>3.3</span><span style='color:#308080; '>/</span>pio017<span style='color:#308080; '>.</span><span style='color:#008c00; '>001</span><span style='color:#308080; '>.</span>
Loaded patch file <span style='color:#308080; '>/</span>Applications<span style='color:#308080; '>/</span>AllegroCL<span style='color:#308080; '>/</span>update<span style='color:#308080; '>/</span>agraph<span style='color:#308080; '>/</span><span style='color:#008000; '>3.3</span><span style='color:#308080; '>/</span>pio018<span style='color:#308080; '>.</span><span style='color:#008c00; '>001</span><span style='color:#308080; '>.</span>
Loaded patch file <span style='color:#308080; '>/</span>Applications<span style='color:#308080; '>/</span>AllegroCL<span style='color:#308080; '>/</span>update<span style='color:#308080; '>/</span>agraph<span style='color:#308080; '>/</span><span style='color:#008000; '>3.3</span><span style='color:#308080; '>/</span>pio019<span style='color:#308080; '>.</span><span style='color:#008c00; '>001</span><span style='color:#308080; '>.</span>
AllegroGraph Lisp Edition <span style='color:#008000; '>3.3</span> <span style='color:#308080; '>[</span>built on February <span style='color:#008c00; '>17</span><span style='color:#0066ee; '>,</span> <span style='color:#008c00; '>2010</span> <span style='color:#008c00; '>13</span><span style='color:#400000; '>:53</span><span style='color:#400000; '>:35</span> GMT-<span style='color:#008c00; '>0800</span><span style='color:#308080; '>]</span>
Copyright <span style='color:#308080; '>(</span><span style='color:#200080; font-weight:bold; '>c</span><span style='color:#308080; '>)</span> <span style='color:#008c00; '>2005</span>-<span style='color:#008c00; '>2010</span> Franz Inc<span style='color:#308080; '>.</span>  All Rights Reserved<span style='color:#308080; '>.</span>
AllegroGraph contains patent-pending technology<span style='color:#308080; '>.</span>
With patches<span style='color:#400000; '>:</span> io001<span style='color:#0066ee; '>,</span> io002<span style='color:#0066ee; '>,</span> io003<span style='color:#0066ee; '>,</span> io004<span style='color:#0066ee; '>,</span> io005<span style='color:#0066ee; '>,</span> io996<span style='color:#0066ee; '>,</span> io007<span style='color:#0066ee; '>,</span> io008<span style='color:#0066ee; '>,</span> io009<span style='color:#0066ee; '>,</span> io010<span style='color:#0066ee; '>,</span> io011<span style='color:#0066ee; '>,</span> io012<span style='color:#0066ee; '>,</span> io013<span style='color:#0066ee; '>,</span> io014<span style='color:#0066ee; '>,</span> io015<span style='color:#0066ee; '>,</span> io016<span style='color:#0066ee; '>,</span> io017<span style='color:#0066ee; '>,</span> io018<span style='color:#0066ee; '>,</span> io019<span style='color:#308080; '>.</span>
<span style='color:#7d0045; '>T</span>
CG-USER<span style='color:#308080; '>(</span><span style='color:#200080; font-weight:bold; '>3</span><span style='color:#308080; '>)</span><span style='color:#400000; '>:</span> <span style='color:#308080; '>(</span><span style='color:#200080; font-weight:bold; '>in-package</span> <span style='color:#400000; '>:db</span><span style='color:#308080; '>.</span>agraph<span style='color:#308080; '>.</span>user<span style='color:#308080; '>)</span>
#<span style='color:#308080; '>&lt;</span>The DB<span style='color:#308080; '>.</span>AGRAPH<span style='color:#308080; '>.</span>USER package<span style='color:#308080; '>></span>
TRIPLE-STORE-USER<span style='color:#308080; '>(</span><span style='color:#200080; font-weight:bold; '>4</span><span style='color:#308080; '>)</span><span style='color:#400000; '>:</span> <span style='color:#308080; '>(</span><span style='color:#200080; font-weight:bold; '>enable-!-reader</span><span style='color:#308080; '>)</span>
#<span style='color:#308080; '>&lt;</span>Function READ-TOKEN<span style='color:#308080; '>></span>
<span style='color:#7d0045; '>T</span>
TRIPLE-STORE-USER<span style='color:#308080; '>(</span><span style='color:#200080; font-weight:bold; '>5</span><span style='color:#308080; '>)</span><span style='color:#400000; '>:</span> <span style='color:#308080; '>(</span><span style='color:#200080; font-weight:bold; '>enable-print-decoded</span> <span style='color:#7d0045; '>t</span><span style='color:#308080; '>)</span>
<span style='color:#7d0045; '>T</span>
TRIPLE-STORE-USER<span style='color:#308080; '>(</span><span style='color:#200080; font-weight:bold; '>6</span><span style='color:#308080; '>)</span><span style='color:#400000; '>:</span> <span style='color:#308080; '>(</span><span style='color:#200080; font-weight:bold; '>triple-store:display-namespaces</span><span style='color:#308080; '>)</span>
rdfs <span style='color:#308080; '>=</span><span style='color:#308080; '>></span> http<span style='color:#400000; '>:</span><span style='color:#308080; '>/</span><span style='color:#308080; '>/</span>www<span style='color:#308080; '>.</span>w3<span style='color:#308080; '>.</span>org<span style='color:#308080; '>/</span><span style='color:#008c00; '>2000</span><span style='color:#308080; '>/</span><span style='color:#008c00; '>01</span><span style='color:#308080; '>/</span>rdf-schema#
err <span style='color:#308080; '>=</span><span style='color:#308080; '>></span> http<span style='color:#400000; '>:</span><span style='color:#308080; '>/</span><span style='color:#308080; '>/</span>www<span style='color:#308080; '>.</span>w3<span style='color:#308080; '>.</span>org<span style='color:#308080; '>/</span><span style='color:#008c00; '>2005</span><span style='color:#308080; '>/</span>xqt-errors#
fn <span style='color:#308080; '>=</span><span style='color:#308080; '>></span> http<span style='color:#400000; '>:</span><span style='color:#308080; '>/</span><span style='color:#308080; '>/</span>www<span style='color:#308080; '>.</span>w3<span style='color:#308080; '>.</span>org<span style='color:#308080; '>/</span><span style='color:#008c00; '>2005</span><span style='color:#308080; '>/</span>xpath-functions#
rdf <span style='color:#308080; '>=</span><span style='color:#308080; '>></span> http<span style='color:#400000; '>:</span><span style='color:#308080; '>/</span><span style='color:#308080; '>/</span>www<span style='color:#308080; '>.</span>w3<span style='color:#308080; '>.</span>org<span style='color:#308080; '>/</span><span style='color:#008c00; '>1999</span><span style='color:#308080; '>/</span><span style='color:#008c00; '>02</span><span style='color:#308080; '>/</span><span style='color:#008c00; '>22</span>-rdf-syntax-ns#
xs <span style='color:#308080; '>=</span><span style='color:#308080; '>></span> http<span style='color:#400000; '>:</span><span style='color:#308080; '>/</span><span style='color:#308080; '>/</span>www<span style='color:#308080; '>.</span>w3<span style='color:#308080; '>.</span>org<span style='color:#308080; '>/</span><span style='color:#008c00; '>2001</span><span style='color:#308080; '>/</span>XMLSchema#
xsd <span style='color:#308080; '>=</span><span style='color:#308080; '>></span> http<span style='color:#400000; '>:</span><span style='color:#308080; '>/</span><span style='color:#308080; '>/</span>www<span style='color:#308080; '>.</span>w3<span style='color:#308080; '>.</span>org<span style='color:#308080; '>/</span><span style='color:#008c00; '>2001</span><span style='color:#308080; '>/</span>XMLSchema#
owl <span style='color:#308080; '>=</span><span style='color:#308080; '>></span> http<span style='color:#400000; '>:</span><span style='color:#308080; '>/</span><span style='color:#308080; '>/</span>www<span style='color:#308080; '>.</span>w3<span style='color:#308080; '>.</span>org<span style='color:#308080; '>/</span><span style='color:#008c00; '>2002</span><span style='color:#308080; '>/</span><span style='color:#008c00; '>07</span><span style='color:#308080; '>/</span>owl#
TRIPLE-STORE-USER<span style='color:#308080; '>(</span><span style='color:#200080; font-weight:bold; '>9</span><span style='color:#308080; '>)</span><span style='color:#400000; '>:</span> <span style='color:#308080; '>!</span>rdfs<span style='color:#400000; '>:class</span>
<span style='color:#308080; '>!</span>rdfs<span style='color:#400000; '>:class</span>
</pre>
<p>Next thing, we want to <strong>create a local triplestore</strong>, <strong>register</strong> a dummy <strong>namespace</strong> and <strong>add</strong> a couple of <strong>triples</strong> to it. Finally, we <strong>dump</strong> the whole triplestore in a <strong>file</strong>.</p>
<pre style='color:#000020;background:#f6f8ff; overflow:auto;'>TRIPLE-STORE-USER<span style='color:#308080; '>(</span><span style='color:#200080; font-weight:bold; '>10</span><span style='color:#308080; '>)</span><span style='color:#400000; '>:</span> <span style='color:#308080; '>(</span><span style='color:#200080; font-weight:bold; '>triple-store:create-triple-store</span> <span style='color:#1060b6; '>"~/tmp/rdfstore_1"</span><span style='color:#308080; '>)</span>
#<span style='color:#308080; '>&lt;</span>DB<span style='color:#308080; '>.</span>AGRAPH<span style='color:#400000; '>:</span><span style='color:#400000; '>:TRIPLE-DB</span> <span style='color:#308080; '>/</span>Users<span style='color:#308080; '>/</span>mac<span style='color:#308080; '>/</span>tmp<span style='color:#308080; '>/</span>rdfstore_1<span style='color:#0066ee; '>,</span> open @ #x21dfc80a<span style='color:#308080; '>></span>
TRIPLE-STORE-USER<span style='color:#308080; '>(</span><span style='color:#200080; font-weight:bold; '>11</span><span style='color:#308080; '>)</span><span style='color:#400000; '>:</span> <span style='color:#308080; '>(</span><span style='color:#200080; font-weight:bold; '>register-namespace</span> <span style='color:#1060b6; '>"kb"</span> <span style='color:#1060b6; '>"http://michelepasin.org/rdfs#"</span><span style='color:#308080; '>)</span>
<span style='color:#1060b6; '>"http://michelepasin.org/rdfs#"</span>
TRIPLE-STORE-USER<span style='color:#308080; '>(</span><span style='color:#200080; font-weight:bold; '>12</span><span style='color:#308080; '>)</span><span style='color:#400000; '>:</span> <span style='color:#308080; '>(</span><span style='color:#200080; font-weight:bold; '>triple-store:display-namespaces</span><span style='color:#308080; '>)</span>
rdfs <span style='color:#308080; '>=</span><span style='color:#308080; '>></span> http<span style='color:#400000; '>:</span><span style='color:#308080; '>/</span><span style='color:#308080; '>/</span>www<span style='color:#308080; '>.</span>w3<span style='color:#308080; '>.</span>org<span style='color:#308080; '>/</span><span style='color:#008c00; '>2000</span><span style='color:#308080; '>/</span><span style='color:#008c00; '>01</span><span style='color:#308080; '>/</span>rdf-schema#
err <span style='color:#308080; '>=</span><span style='color:#308080; '>></span> http<span style='color:#400000; '>:</span><span style='color:#308080; '>/</span><span style='color:#308080; '>/</span>www<span style='color:#308080; '>.</span>w3<span style='color:#308080; '>.</span>org<span style='color:#308080; '>/</span><span style='color:#008c00; '>2005</span><span style='color:#308080; '>/</span>xqt-errors#
fn <span style='color:#308080; '>=</span><span style='color:#308080; '>></span> http<span style='color:#400000; '>:</span><span style='color:#308080; '>/</span><span style='color:#308080; '>/</span>www<span style='color:#308080; '>.</span>w3<span style='color:#308080; '>.</span>org<span style='color:#308080; '>/</span><span style='color:#008c00; '>2005</span><span style='color:#308080; '>/</span>xpath-functions#
rdf <span style='color:#308080; '>=</span><span style='color:#308080; '>></span> http<span style='color:#400000; '>:</span><span style='color:#308080; '>/</span><span style='color:#308080; '>/</span>www<span style='color:#308080; '>.</span>w3<span style='color:#308080; '>.</span>org<span style='color:#308080; '>/</span><span style='color:#008c00; '>1999</span><span style='color:#308080; '>/</span><span style='color:#008c00; '>02</span><span style='color:#308080; '>/</span><span style='color:#008c00; '>22</span>-rdf-syntax-ns#
xs <span style='color:#308080; '>=</span><span style='color:#308080; '>></span> http<span style='color:#400000; '>:</span><span style='color:#308080; '>/</span><span style='color:#308080; '>/</span>www<span style='color:#308080; '>.</span>w3<span style='color:#308080; '>.</span>org<span style='color:#308080; '>/</span><span style='color:#008c00; '>2001</span><span style='color:#308080; '>/</span>XMLSchema#
xsd <span style='color:#308080; '>=</span><span style='color:#308080; '>></span> http<span style='color:#400000; '>:</span><span style='color:#308080; '>/</span><span style='color:#308080; '>/</span>www<span style='color:#308080; '>.</span>w3<span style='color:#308080; '>.</span>org<span style='color:#308080; '>/</span><span style='color:#008c00; '>2001</span><span style='color:#308080; '>/</span>XMLSchema#
owl <span style='color:#308080; '>=</span><span style='color:#308080; '>></span> http<span style='color:#400000; '>:</span><span style='color:#308080; '>/</span><span style='color:#308080; '>/</span>www<span style='color:#308080; '>.</span>w3<span style='color:#308080; '>.</span>org<span style='color:#308080; '>/</span><span style='color:#008c00; '>2002</span><span style='color:#308080; '>/</span><span style='color:#008c00; '>07</span><span style='color:#308080; '>/</span>owl#
kb <span style='color:#308080; '>=</span><span style='color:#308080; '>></span> http<span style='color:#400000; '>:</span><span style='color:#308080; '>/</span><span style='color:#308080; '>/</span>michelepasin<span style='color:#308080; '>.</span>org<span style='color:#308080; '>/</span>rdfs#
TRIPLE-STORE-USER<span style='color:#308080; '>(</span><span style='color:#200080; font-weight:bold; '>13</span><span style='color:#308080; '>)</span><span style='color:#400000; '>:</span> <span style='color:#308080; '>(</span><span style='color:#200080; font-weight:bold; '>defvar</span> *doc1* <span style='color:#308080; '>(</span><span style='color:#200080; font-weight:bold; '>resource</span> <span style='color:#1060b6; '>"http://www.michelepasin.org/research/"</span><span style='color:#308080; '>)</span><span style='color:#308080; '>)</span>
*DOC1*
TRIPLE-STORE-USER<span style='color:#308080; '>(</span><span style='color:#200080; font-weight:bold; '>14</span><span style='color:#308080; '>)</span><span style='color:#400000; '>:</span> *doc1*
<span style='color:#308080; '>!</span><span style='color:#308080; '>&lt;</span>http<span style='color:#400000; '>:</span><span style='color:#308080; '>/</span><span style='color:#308080; '>/</span>www<span style='color:#308080; '>.</span>michelepasin<span style='color:#308080; '>.</span>org<span style='color:#308080; '>/</span>research<span style='color:#308080; '>/</span><span style='color:#308080; '>></span>
TRIPLE-STORE-USER<span style='color:#308080; '>(</span><span style='color:#200080; font-weight:bold; '>15</span><span style='color:#308080; '>)</span><span style='color:#400000; '>:</span> <span style='color:#308080; '>(</span><span style='color:#200080; font-weight:bold; '>triple-store:add-triple</span> *doc1* <span style='color:#308080; '>!</span>rdf<span style='color:#400000; '>:type</span> <span style='color:#308080; '>!</span>kb<span style='color:#400000; '>:article</span><span style='color:#308080; '>)</span>
<span style='color:#008c00; '>1</span>
TRIPLE-STORE-USER<span style='color:#308080; '>(</span><span style='color:#200080; font-weight:bold; '>16</span><span style='color:#308080; '>)</span><span style='color:#400000; '>:</span> <span style='color:#308080; '>(</span><span style='color:#200080; font-weight:bold; '>triple-store:add-triple</span> *doc1* <span style='color:#308080; '>!</span>rdf<span style='color:#400000; '>:comment</span> <span style='color:#308080; '>!</span><span style='color:#1060b6; '>"what a wonderful book"</span><span style='color:#308080; '>)</span>
<span style='color:#008c00; '>2</span>
TRIPLE-STORE-USER<span style='color:#308080; '>(</span><span style='color:#200080; font-weight:bold; '>17</span><span style='color:#308080; '>)</span><span style='color:#400000; '>:</span> <span style='color:#308080; '>(</span><span style='color:#200080; font-weight:bold; '>triple-store:get-triples-list</span><span style='color:#308080; '>)</span>
<span style='color:#308080; '>(</span><span style='color:#200080; font-weight:bold; '>&lt;</span> type article<span style='color:#308080; '>></span> <span style='color:#308080; '>&lt;</span> comment what a wonderful book<span style='color:#308080; '>></span><span style='color:#308080; '>)</span>
<span style='color:#7d0045; '>NIL</span>
TRIPLE-STORE-USER<span style='color:#308080; '>(</span><span style='color:#200080; font-weight:bold; '>18</span><span style='color:#308080; '>)</span><span style='color:#400000; '>:</span> <span style='color:#308080; '>(</span><span style='color:#200080; font-weight:bold; '>print-triples</span> <span style='color:#308080; '>(</span><span style='color:#200080; font-weight:bold; '>triple-store:get-triples-list</span><span style='color:#308080; '>)</span><span style='color:#308080; '>)</span>
<span style='color:#308080; '>&lt;</span>http<span style='color:#400000; '>:</span><span style='color:#308080; '>/</span><span style='color:#308080; '>/</span>www<span style='color:#308080; '>.</span>michelepasin<span style='color:#308080; '>.</span>org<span style='color:#308080; '>/</span>research<span style='color:#308080; '>/</span><span style='color:#308080; '>></span> <span style='color:#308080; '>&lt;</span>http<span style='color:#400000; '>:</span><span style='color:#308080; '>/</span><span style='color:#308080; '>/</span>www<span style='color:#308080; '>.</span>w3<span style='color:#308080; '>.</span>org<span style='color:#308080; '>/</span><span style='color:#008c00; '>1999</span><span style='color:#308080; '>/</span><span style='color:#008c00; '>02</span><span style='color:#308080; '>/</span><span style='color:#008c00; '>22</span>-rdf-syntax-ns#type<span style='color:#308080; '>></span> <span style='color:#308080; '>&lt;</span>http<span style='color:#400000; '>:</span><span style='color:#308080; '>/</span><span style='color:#308080; '>/</span>michelepasin<span style='color:#308080; '>.</span>org<span style='color:#308080; '>/</span>rdfs#article<span style='color:#308080; '>></span> <span style='color:#308080; '>.</span>
<span style='color:#308080; '>&lt;</span>http<span style='color:#400000; '>:</span><span style='color:#308080; '>/</span><span style='color:#308080; '>/</span>www<span style='color:#308080; '>.</span>michelepasin<span style='color:#308080; '>.</span>org<span style='color:#308080; '>/</span>research<span style='color:#308080; '>/</span><span style='color:#308080; '>></span> <span style='color:#308080; '>&lt;</span>http<span style='color:#400000; '>:</span><span style='color:#308080; '>/</span><span style='color:#308080; '>/</span>www<span style='color:#308080; '>.</span>w3<span style='color:#308080; '>.</span>org<span style='color:#308080; '>/</span><span style='color:#008c00; '>1999</span><span style='color:#308080; '>/</span><span style='color:#008c00; '>02</span><span style='color:#308080; '>/</span><span style='color:#008c00; '>22</span>-rdf-syntax-ns#comment<span style='color:#308080; '>></span> <span style='color:#1060b6; '>"what a wonderful book"</span> <span style='color:#308080; '>.</span>
TRIPLE-STORE-USER<span style='color:#308080; '>(</span><span style='color:#200080; font-weight:bold; '>19</span><span style='color:#308080; '>)</span><span style='color:#400000; '>:</span> <span style='color:#308080; '>(</span><span style='color:#200080; font-weight:bold; '>with-open-file</span> <span style='color:#308080; '>(</span><span style='color:#200080; font-weight:bold; '>output</span> <span style='color:#1060b6; '>"~/tmp/testoutput"</span> <span style='color:#400000; '>:direction</span> <span style='color:#400000; '>:output</span> <span style='color:#400000; '>:if-does-not-exist</span> <span style='color:#400000; '>:create</span><span style='color:#308080; '>)</span>
<span style='color:#308080; '>(</span><span style='color:#200080; font-weight:bold; '>print-triples</span> <span style='color:#308080; '>(</span><span style='color:#200080; font-weight:bold; '>triple-store:get-triples-list</span><span style='color:#308080; '>)</span> <span style='color:#400000; '>:stream</span> output <span style='color:#400000; '>:format</span> <span style='color:#400000; '>:ntriple</span><span style='color:#308080; '>)</span><span style='color:#308080; '>)</span>
</pre>
<p>If we open the contents of the newly created &#8220;~/tmp/testoutput&#8221; file, here&#8217;s what we would find:</p>
<pre style='color:#000000;background:#f1f0f0; overflow:auto;'><span style='color:#806030; '>&lt;</span>http<span style='color:#806030; '>:</span><span style='color:#806030; '>/</span><span style='color:#806030; '>/</span>www<span style='color:#806030; '>.</span>michelepasin<span style='color:#806030; '>.</span>org<span style='color:#806030; '>/</span>research<span style='color:#806030; '>/</span><span style='color:#806030; '>></span>
    <span style='color:#806030; '>&lt;</span>http<span style='color:#806030; '>:</span><span style='color:#806030; '>/</span><span style='color:#806030; '>/</span>www<span style='color:#806030; '>.</span>w3<span style='color:#806030; '>.</span>org<span style='color:#806030; '>/</span><span style='color:#c00000; '>1999</span><span style='color:#806030; '>/</span><span style='color:#c00000; '>02</span><span style='color:#806030; '>/</span><span style='color:#c00000; '>22</span><span style='color:#806030; '>-</span>rdf<span style='color:#806030; '>-</span>syntax<span style='color:#806030; '>-</span>ns<span style='color:#c34e00; '>#type> </span>
        <span style='color:#806030; '>&lt;</span>http<span style='color:#806030; '>:</span><span style='color:#806030; '>/</span><span style='color:#806030; '>/</span>michelepasin<span style='color:#806030; '>.</span>org<span style='color:#806030; '>/</span>rdfs<span style='color:#c34e00; '>#article> .</span>
<span style='color:#806030; '>&lt;</span>http<span style='color:#806030; '>:</span><span style='color:#806030; '>/</span><span style='color:#806030; '>/</span>www<span style='color:#806030; '>.</span>michelepasin<span style='color:#806030; '>.</span>org<span style='color:#806030; '>/</span>research<span style='color:#806030; '>/</span><span style='color:#806030; '>></span>
    <span style='color:#806030; '>&lt;</span>http<span style='color:#806030; '>:</span><span style='color:#806030; '>/</span><span style='color:#806030; '>/</span>www<span style='color:#806030; '>.</span>w3<span style='color:#806030; '>.</span>org<span style='color:#806030; '>/</span><span style='color:#c00000; '>1999</span><span style='color:#806030; '>/</span><span style='color:#c00000; '>02</span><span style='color:#806030; '>/</span><span style='color:#c00000; '>22</span><span style='color:#806030; '>-</span>rdf<span style='color:#806030; '>-</span>syntax<span style='color:#806030; '>-</span>ns<span style='color:#c34e00; '>#comment> </span>
        <span style='color:#e60000; '>"what a wonderful book"</span> <span style='color:#806030; '>.</span>
</pre>
<p>Finally, let&#8217;s use <a href="http://www.xml.com/pub/a/2005/11/16/introducing-sparql-querying-semantic-web-tutorial.html?page=1">SPARQL</a> to launch a (quite dumb) query that retrieves all triples from the triplestore :</p>
<pre style='color:#000020;background:#f6f8ff; overflow:auto; height:400px;'>TRIPLE-STORE-USER<span style='color:#308080; '>(</span><span style='color:#200080; font-weight:bold; '>53</span><span style='color:#308080; '>)</span><span style='color:#400000; '>:</span> <span style='color:#308080; '>(</span><span style='color:#200080; font-weight:bold; '>sparql:run-sparql</span> 
 " PREFIX kb<span style='color:#400000; '>:</span> <span style='color:#308080; '>&lt;</span>http<span style='color:#400000; '>:</span><span style='color:#308080; '>/</span><span style='color:#308080; '>/</span>www<span style='color:#308080; '>.</span>michelepasin<span style='color:#308080; '>.</span>org<span style='color:#308080; '>/</span>research#<span style='color:#308080; '>></span> 
   SELECT <span style='color:#308080; '>?</span>article_uri <span style='color:#308080; '>?</span>pred <span style='color:#308080; '>?</span>obj WHERE <span style='color:#308080; '>{</span>
   <span style='color:#308080; '>?</span>article_uri <span style='color:#308080; '>?</span>pred <span style='color:#308080; '>?</span>obj <span style='color:#308080; '>.</span> 
   <span style='color:#308080; '>}</span>"
 <span style='color:#308080; '>)</span>
<span style='color:#308080; '>&lt;</span><span style='color:#308080; '>?</span>xml version<span style='color:#308080; '>=</span><span style='color:#1060b6; '>"1.0"</span><span style='color:#308080; '>?</span><span style='color:#308080; '>></span>
<span style='color:#308080; '>&lt;</span><span style='color:#308080; '>!</span>-- Generated by AllegroGraph <span style='color:#008000; '>3.3</span> --<span style='color:#308080; '>></span>
<span style='color:#308080; '>&lt;</span>sparql xmlns<span style='color:#308080; '>=</span><span style='color:#1060b6; '>"http://www.w3.org/2005/sparql-results#"</span><span style='color:#308080; '>></span>
  <span style='color:#308080; '>&lt;</span>head<span style='color:#308080; '>></span>
    <span style='color:#308080; '>&lt;</span>variable name<span style='color:#308080; '>=</span><span style='color:#1060b6; '>"article_uri"</span><span style='color:#308080; '>/</span><span style='color:#308080; '>></span>
    <span style='color:#308080; '>&lt;</span>variable name<span style='color:#308080; '>=</span><span style='color:#1060b6; '>"pred"</span><span style='color:#308080; '>/</span><span style='color:#308080; '>></span>
    <span style='color:#308080; '>&lt;</span>variable name<span style='color:#308080; '>=</span><span style='color:#1060b6; '>"obj"</span><span style='color:#308080; '>/</span><span style='color:#308080; '>></span>
  <span style='color:#308080; '>&lt;</span><span style='color:#308080; '>/</span>head<span style='color:#308080; '>></span>
  <span style='color:#308080; '>&lt;</span>results<span style='color:#308080; '>></span>
    <span style='color:#308080; '>&lt;</span>result<span style='color:#308080; '>></span>
      <span style='color:#308080; '>&lt;</span>binding name<span style='color:#308080; '>=</span><span style='color:#1060b6; '>"article_uri"</span><span style='color:#308080; '>></span>
        <span style='color:#308080; '>&lt;</span>uri<span style='color:#308080; '>></span>http<span style='color:#400000; '>:</span><span style='color:#308080; '>/</span><span style='color:#308080; '>/</span>www<span style='color:#308080; '>.</span>michelepasin<span style='color:#308080; '>.</span>org<span style='color:#308080; '>/</span>research<span style='color:#308080; '>/</span><span style='color:#308080; '>&lt;</span><span style='color:#308080; '>/</span>uri<span style='color:#308080; '>></span>
      <span style='color:#308080; '>&lt;</span><span style='color:#308080; '>/</span>binding<span style='color:#308080; '>></span>
      <span style='color:#308080; '>&lt;</span>binding name<span style='color:#308080; '>=</span><span style='color:#1060b6; '>"pred"</span><span style='color:#308080; '>></span>
        <span style='color:#308080; '>&lt;</span>uri<span style='color:#308080; '>></span>http<span style='color:#400000; '>:</span><span style='color:#308080; '>/</span><span style='color:#308080; '>/</span>www<span style='color:#308080; '>.</span>w3<span style='color:#308080; '>.</span>org<span style='color:#308080; '>/</span><span style='color:#008c00; '>1999</span><span style='color:#308080; '>/</span><span style='color:#008c00; '>02</span><span style='color:#308080; '>/</span><span style='color:#008c00; '>22</span>-rdf-syntax-ns#type<span style='color:#308080; '>&lt;</span><span style='color:#308080; '>/</span>uri<span style='color:#308080; '>></span>
      <span style='color:#308080; '>&lt;</span><span style='color:#308080; '>/</span>binding<span style='color:#308080; '>></span>
      <span style='color:#308080; '>&lt;</span>binding name<span style='color:#308080; '>=</span><span style='color:#1060b6; '>"obj"</span><span style='color:#308080; '>></span>
        <span style='color:#308080; '>&lt;</span>uri<span style='color:#308080; '>></span>http<span style='color:#400000; '>:</span><span style='color:#308080; '>/</span><span style='color:#308080; '>/</span>michelepasin<span style='color:#308080; '>.</span>org<span style='color:#308080; '>/</span>rdfs#article<span style='color:#308080; '>&lt;</span><span style='color:#308080; '>/</span>uri<span style='color:#308080; '>></span>
      <span style='color:#308080; '>&lt;</span><span style='color:#308080; '>/</span>binding<span style='color:#308080; '>></span>
    <span style='color:#308080; '>&lt;</span><span style='color:#308080; '>/</span>result<span style='color:#308080; '>></span>
    <span style='color:#308080; '>&lt;</span>result<span style='color:#308080; '>></span>
      <span style='color:#308080; '>&lt;</span>binding name<span style='color:#308080; '>=</span><span style='color:#1060b6; '>"article_uri"</span><span style='color:#308080; '>></span>
        <span style='color:#308080; '>&lt;</span>uri<span style='color:#308080; '>></span>http<span style='color:#400000; '>:</span><span style='color:#308080; '>/</span><span style='color:#308080; '>/</span>www<span style='color:#308080; '>.</span>michelepasin<span style='color:#308080; '>.</span>org<span style='color:#308080; '>/</span>research<span style='color:#308080; '>/</span><span style='color:#308080; '>&lt;</span><span style='color:#308080; '>/</span>uri<span style='color:#308080; '>></span>
      <span style='color:#308080; '>&lt;</span><span style='color:#308080; '>/</span>binding<span style='color:#308080; '>></span>
      <span style='color:#308080; '>&lt;</span>binding name<span style='color:#308080; '>=</span><span style='color:#1060b6; '>"pred"</span><span style='color:#308080; '>></span>
        <span style='color:#308080; '>&lt;</span>uri<span style='color:#308080; '>></span>http<span style='color:#400000; '>:</span><span style='color:#308080; '>/</span><span style='color:#308080; '>/</span>www<span style='color:#308080; '>.</span>w3<span style='color:#308080; '>.</span>org<span style='color:#308080; '>/</span><span style='color:#008c00; '>1999</span><span style='color:#308080; '>/</span><span style='color:#008c00; '>02</span><span style='color:#308080; '>/</span><span style='color:#008c00; '>22</span>-rdf-syntax-ns#comment<span style='color:#308080; '>&lt;</span><span style='color:#308080; '>/</span>uri<span style='color:#308080; '>></span>
      <span style='color:#308080; '>&lt;</span><span style='color:#308080; '>/</span>binding<span style='color:#308080; '>></span>
      <span style='color:#308080; '>&lt;</span>binding name<span style='color:#308080; '>=</span><span style='color:#1060b6; '>"obj"</span><span style='color:#308080; '>></span>
        <span style='color:#308080; '>&lt;</span>literal<span style='color:#308080; '>></span>what a wonderful book<span style='color:#308080; '>&lt;</span><span style='color:#308080; '>/</span>literal<span style='color:#308080; '>></span>
      <span style='color:#308080; '>&lt;</span><span style='color:#308080; '>/</span>binding<span style='color:#308080; '>></span>
    <span style='color:#308080; '>&lt;</span><span style='color:#308080; '>/</span>result<span style='color:#308080; '>></span>
  <span style='color:#308080; '>&lt;</span><span style='color:#308080; '>/</span>results<span style='color:#308080; '>></span>
<span style='color:#308080; '>&lt;</span><span style='color:#308080; '>/</span>sparql<span style='color:#308080; '>></span>
<span style='color:#7d0045; '>T</span>
<span style='color:#400000; '>:SELECT</span>
<span style='color:#308080; '>(</span><span style='color:#200080; font-weight:bold; '>|?article_uri|</span> <span style='color:#308080; '>|</span><span style='color:#308080; '>?</span>pred<span style='color:#308080; '>|</span> <span style='color:#308080; '>|</span><span style='color:#308080; '>?</span>obj<span style='color:#308080; '>|</span><span style='color:#308080; '>)</span>
TRIPLE-STORE-USER<span style='color:#308080; '>(</span><span style='color:#200080; font-weight:bold; '>54</span><span style='color:#308080; '>)</span><span style='color:#400000; '>:</span>
</pre>
<p>That&#8217;s all for now; this is enough to get started with Allegro-CL and the semantic web programming libraries it contains. </p>
<p>Mind that I&#8217;ve only scratched the surface here, there&#8217;s <strong>lots and lots more</strong> that can be done with this environment. If you want to explore these topics further make sure you have a look at <a href="http://www.markwatson.com/opencontent/book_lisp.pdf">Watson&#8217;s book</a>, &#8217;cause that&#8217;s a great (and free) resource, really! </p>
<p>&nbsp;</p>
]]></content:encoded>
									<post-id xmlns="com-wordpress:feed-additions:1">1274</post-id>	</item>
		<item>
		<title>Clojure or not clojure?</title>
		<link>http://www.michelepasin.org/blog/2010/11/25/clojure-or-not-clojure/</link>
				<comments>http://www.michelepasin.org/blog/2010/11/25/clojure-or-not-clojure/#comments</comments>
				<pubDate>Thu, 25 Nov 2010 15:06:35 +0000</pubDate>
		<dc:creator><![CDATA[mikele]]></dc:creator>
				<category><![CDATA[TechLife]]></category>
		<category><![CDATA[clojure]]></category>
		<category><![CDATA[dynamic]]></category>
		<category><![CDATA[functional]]></category>
		<category><![CDATA[java]]></category>
		<category><![CDATA[language]]></category>
		<category><![CDATA[lisp]]></category>

		<guid isPermaLink="false">http://www.michelepasin.org/blog/?p=1024</guid>
				<description><![CDATA[Clojure is a quite recent programming language that&#8217;s becoming popular among developers; the big selling point is that it&#8217;s functional and dynamically typed (such as Lisp or Python), but since it uses Java&#8217;s Virtual Runtime as its platform it also accommodates the needs of the many developers have been growing up in the Java world. [&#8230;]]]></description>
								<content:encoded><![CDATA[<p><a href="http://clojure.org/">Clojure</a> is a quite recent programming language that&#8217;s becoming popular among developers; the big selling point is that it&#8217;s <a href="http://clojure.org/state">functional</a> and <a href="http://en.wikipedia.org/wiki/Dynamic_typing#Dynamic_typing">dynamically</a> typed (such as Lisp or Python), but since it uses Java&#8217;s Virtual Runtime as its platform it also accommodates the needs of the many developers have been growing up in the Java world. </p>
<p>The book <a href="http://www.pragprog.com/titles/shcloj/programming-clojure">Programming Clojure</a> sums up well the pros of this language:</p>
<blockquote><p>Clojure is <strong>elegant</strong>. Clojures clean, careful design lets you write programs that get right to the essence of a problem, without a lot of clutter and ceremony.<br />
Clojure is <strong>Lisp reloaded</strong>. Clojure has the power inherent in Lisp, but is not constrained by the history of Lisp.<br />
Clojure is a <strong>functional</strong> language. Data structures are immutable, and functions tend to be side-effect free. This makes it easier to write correct programs, and to compose large programs from smaller ones.<br />
Clojure is <strong>concurrent</strong>. Rather than error-prone locking, Clojure provides software transactional memory.<br />
Clojure <strong>embraces Java</strong>. Calling from Clojure to Java is direct, and goes through no translation layer.<br />
Clojure is <strong>fast</strong>. Wherever you need it, you can get the exact same performance that you could get from hand-written Java code.</p></blockquote>
<p>I&#8217;ve been programming in Lisp for a while, then moved to Python in order to use something less dated and to be able to do more agile web development. But the strengths of Lisp, together with that kind of magic that comes with it (maybe coming from the <a href="http://en.wikipedia.org/wiki/Homoiconicity">code-as-data paradigm</a>) is something which I bet all Lisp programmers miss in other languages. So I decided to give Clojure a go..</p>
<p>Installation is surprisingly super easy &#8211; and I mean it &#8211; especially if you are on mac osX. Clojure is a java library, so all you have to do is <a href="http://clojure.org/getting_started">download the package and run it from the command line using your java compiler</a>. That gives you the basic interactive environment:</p>
<pre><code style="font-size:14px;color:#000000; background:lavender; overflow:auto;">
java -cp clojure.jar clojure.main</code></pre>
<p>The interpreter is good for testing, but not for building large programs. So the next step is getting an IDE. Looks like there are <a href="http://www.bestinclass.dk/index.clj/2010/03/clojure-ides-the-grand-tour-getting-started.html">many choices available</a>, so just pick one of your liking. I personally love <a href="http://macromates.com/">TextMate</a> a lot, so I was happy to find out that there is a <a href="https://github.com/swannodette/textmate-clojure">clojure bundle</a> that contains all that you need to get started (yes, the clojure environment too, so you can even skip the step above). Easy beasy to install, but first you need to install <a href="https://github.com/ninjudd/cake">Cake</a>, a build tool that you can get via ruby&#8217;s gem command (usually preinstalled on OSx). So:</p>
<pre><code style="font-size:14px;color:#000000; background:lavender; overflow:auto;">
sudo gem install cake</code></pre>
<p>Then install Textmate&#8217;s bundle for clojure like this:</p>
<pre><code style="font-size:14px;color:#000000; background:lavender; overflow:auto;">
$ cd ~/Library/Application Support/TextMate/Bundles
$ git clone git://github.com/swannodette/textmate-clojure.git Clojure.tmbundle
$ osascript -e 'tell app "TextMate" to reload bundles'</code></pre>
<p>I don&#8217;t use Ruby, so the final step for me was adding to the system path the location of ruby&#8217;s gems (so that Cake can be run from Textmate). Open up you ~/.bash_profile and add this line:</p>
<pre><code style="font-size:14px;color:#000000; background:lavender; overflow:auto;">
export PATH="/Users/mike/.gem/ruby/1.8/bin:$PATH"</code></pre>
<p>That&#8217;s it! A nice fellow created a really good video tutorial about how to use Textmate with the Clojure bundle, so I was able to run my first application quite quickly:</p>
<p>Once you&#8217;ve familiarized  with the environment, copy and paste the code below &#8211; it&#8217;s an implementation of the Tetris game in clojure (which I found <a href="https://github.com/yogthos/Clojure-Tetris/blob/master/src/tetris.clj">here</a>). Very useful as a learning resource!</p>
<div style='color:#ffffff;background:#000000; line-height:100%; font-size:15px; overflow:auto;'>
<pre>
<font color="#ffa600">(</font>ns tetris
  <font color="#ffa600">(</font>:import
    <font color="#ffa600">(</font>javax.swing JFrame<font color="#ffa600">)</font>
    <font color="#ffa600">(</font>java.awt Canvas Graphics Color Toolkit<font color="#ffa600">)</font>
    <font color="#ffa600">(</font>java.awt.event ActionListener KeyListener KeyEvent<font color="#ffa600">))</font>
  <font color="#ffa600">(</font>:gen-class<font color="#ffa600">))</font>

<font color="#ffa600">(</font>def <font color="#63ff63"><b>*cols*</b></font> <font color="#ffa2a5">10</font><font color="#ffa600">)</font>
<font color="#ffa600">(</font>def <font color="#63ff63"><b>*rows*</b></font> <font color="#ffa2a5">20</font><font color="#ffa600">)</font>
<font color="#ffa600">(</font>def <font color="#63ff63"><b>*width*</b></font> <font color="#ffa2a5">300</font><font color="#ffa600">)</font>
<font color="#ffa600">(</font>def <font color="#63ff63"><b>*height*</b></font> <font color="#ffa2a5">600</font><font color="#ffa600">)</font>
<font color="#ffa600">(</font>def <font color="#63ff63"><b>*offset*</b></font> <font color="#ffa600">(</font><font color="#ffff63"><b>atom</b></font> [0, <font color="#ffa2a5">0</font>]<font color="#ffa600">))</font>
<font color="#ffa600">(</font>def <font color="#63ff63"><b>*rotation*</b></font> <font color="#ffa600">(</font><font color="#ffff63"><b>atom</b></font> <font color="#ffff63"><b>nil</b></font><font color="#ffa600">))</font>
<font color="#ffa600">(</font>def <font color="#63ff63"><b>*shapes*</b></font>  [[[0,<font color="#ffa2a5">1</font>],[0,<font color="#ffa2a5">2</font>],[0,<font color="#ffa2a5">3</font>],[0,<font color="#ffa2a5">4</font>]]
                [[0,<font color="#ffa2a5">0</font>],[0,<font color="#ffa2a5">1</font>],[1,<font color="#ffa2a5">1</font>],[1,<font color="#ffa2a5">2</font>]]
                [[1,<font color="#ffa2a5">2</font>],[1,<font color="#ffa2a5">1</font>],[0,<font color="#ffa2a5">1</font>],[0,<font color="#ffa2a5">0</font>]]
                [[0,<font color="#ffa2a5">0</font>],[0,<font color="#ffa2a5">1</font>],[1,<font color="#ffa2a5">0</font>],[1,<font color="#ffa2a5">1</font>]]
                [[0,<font color="#ffa2a5">0</font>],[0,<font color="#ffa2a5">1</font>],[0,<font color="#ffa2a5">2</font>],[1,<font color="#ffa2a5">2</font>]]
                [[1,<font color="#ffa2a5">0</font>],[1,<font color="#ffa2a5">1</font>],[1,<font color="#ffa2a5">2</font>],[0,<font color="#ffa2a5">2</font>]]]<font color="#ffa600">)</font>

<font color="#ffa600">(</font>defn get-shape []
  <font color="#ffa600">(</font><font color="#ffff63"><b>let</b></font> [shape <font color="#ffa600">(</font>rand-nth <font color="#63ff63"><b>*shapes*</b></font><font color="#ffa600">)</font>
        offset <font color="#ffa600">(</font>inc <font color="#ffa600">(</font>rand-int <font color="#ffa600">(</font><font color="#ffff63"><b>-</b></font> <font color="#63ff63"><b>*cols*</b></font> <font color="#ffa2a5">3</font><font color="#ffa600">)))</font>]
    <font color="#ffa600">(</font><font color="#ffff63"><b>map</b></font> <font color="#ffa600">(</font>fn [[x y]] [<font color="#ffa600">(</font><font color="#ffff63"><b>+</b></font> x offset<font color="#ffa600">)</font>, y]<font color="#ffa600">)</font> shape<font color="#ffa600">)))</font>

<font color="#ffa600">(</font>defn get-board []
  <font color="#ffa600">(</font>vec <font color="#ffa600">(</font>range <font color="#ffa600">(</font><font color="#ffff63"><b>*</b></font> <font color="#63ff63"><b>*rows*</b></font> <font color="#63ff63"><b>*cols*</b></font><font color="#ffa600">))))</font>

<font color="#ffa600">(</font>defn pos-to-xy [pos]
  <font color="#ffa600">(</font><font color="#ffff63"><b>let</b></font> [x <font color="#ffa600">(</font><font color="#ffff63"><b>mod</b></font> pos <font color="#63ff63"><b>*cols*</b></font><font color="#ffa600">)</font>
        y <font color="#ffa600">(</font>int <font color="#ffa600">(</font><font color="#ffff63"><b>/</b></font> <font color="#ffa600">(</font><font color="#ffff63"><b>-</b></font> pos x<font color="#ffa600">)</font> <font color="#63ff63"><b>*cols*</b></font><font color="#ffa600">))</font>]
    [x, y]<font color="#ffa600">))</font>

<font color="#ffa600">(</font>defn collides?
  <font color="#ffa600">(</font>[board x y pos]
    <font color="#ffa600">(</font><font color="#ffff63"><b>let</b></font> [[posx posy] <font color="#ffa600">(</font>pos-to-xy pos<font color="#ffa600">)</font>]
      <font color="#ffa600">(</font><font color="#ffff63"><b>and</b></font>
        <font color="#ffa600">(</font><font color="#ffff63"><b>&gt;</b></font> x <font color="#ffa600">(</font><font color="#ffff63"><b>-</b></font> <font color="#ffa2a5">1</font><font color="#ffa600">))</font>
        <font color="#ffa600">(</font><font color="#ffff63"><b>&lt;</b></font> x <font color="#63ff63"><b>*cols*</b></font><font color="#ffa600">)</font>
        <font color="#ffa600">(</font><font color="#ffff63"><b>&lt;</b></font> y <font color="#63ff63"><b>*rows*</b></font><font color="#ffa600">)</font>
        <font color="#ffa600">(</font><font color="#ffff63"><b>not</b></font> <font color="#ffa600">(</font><font color="#ffff63"><b>and</b></font>
              <font color="#ffa600">(</font><font color="#ffff63"><b>=</b></font> posx x<font color="#ffa600">)</font>
              <font color="#ffa600">(</font><font color="#ffff63"><b>=</b></font> posy y<font color="#ffa600">)</font>
              <font color="#ffa600">(</font><font color="#ffff63"><b>not</b></font> <font color="#ffa600">(</font><font color="#ffff63"><b>get</b></font> board <font color="#ffa600">(</font><font color="#ffff63"><b>+</b></font> pos <font color="#63ff63"><b>*cols*</b></font><font color="#ffa600">))))))))</font>
  <font color="#ffa600">(</font>[board shape pos]
    <font color="#ffa600">(</font><font color="#ffff63"><b>every</b></font>?
      #{true}
      <font color="#ffa600">(</font>for [[x y] shape]
       <font color="#ffa600">(</font>collides? board x y pos<font color="#ffa600">))))</font>
  <font color="#ffa600">(</font>[board shape]
    <font color="#ffa600">(</font><font color="#ffff63"><b>not</b></font> <font color="#ffa600">(</font><font color="#ffff63"><b>reduce</b></font>
           #<font color="#ffa600">(</font><font color="#ffff63"><b>and</b></font> %1 <font color="#ffa600">(</font>collides? board shape %2<font color="#ffa600">))</font>
          <font color="#ffa600">(</font>range <font color="#ffa600">(</font><font color="#ffff63"><b>count</b></font> board<font color="#ffa600">))))</font> <font color="#ffa600">))</font>

<font color="#ffa600">(</font>defn rotate [board shape]
  <font color="#ffa600">(</font><font color="#ffff63"><b>if</b></font> <font color="#ffa600">(</font><font color="#ffff63"><b>nil</b></font>? @*rotation*<font color="#ffa600">)</font>
    shape
    <font color="#ffa600">(</font><font color="#ffff63"><b>let</b></font> [[avg-x avg-y] <font color="#ffa600">(</font>-&gt;&gt; shape
                          <font color="#ffa600">(</font><font color="#ffff63"><b>reduce</b></font>
                            <font color="#ffa600">(</font>fn [[tx ty] [x y]]
                              [<font color="#ffa600">(</font><font color="#ffff63"><b>+</b></font> tx x<font color="#ffa600">)</font>, <font color="#ffa600">(</font><font color="#ffff63"><b>+</b></font> ty y<font color="#ffa600">)</font>]<font color="#ffa600">))</font>
                          <font color="#ffa600">(</font><font color="#ffff63"><b>map</b></font> #<font color="#ffa600">(</font>int <font color="#ffa600">(</font><font color="#ffff63"><b>/</b></font> % <font color="#ffa2a5">4</font><font color="#ffa600">))))</font>

          rotated <font color="#ffa600">(</font><font color="#ffff63"><b>map</b></font> <font color="#ffa600">(</font>fn [[x y]]
                         [<font color="#ffa600">(</font>int <font color="#ffa600">(</font><font color="#ffff63"><b>+</b></font> avg-x <font color="#ffa600">(</font><font color="#ffff63"><b>-</b></font> y avg-y<font color="#ffa600">)))</font>
                          <font color="#ffa600">(</font>int <font color="#ffa600">(</font><font color="#ffff63"><b>-</b></font> avg-y <font color="#ffa600">(</font><font color="#ffff63"><b>-</b></font> x avg-x<font color="#ffa600">)))</font>]<font color="#ffa600">)</font>
                    shape<font color="#ffa600">)</font>]
      <font color="#ffa600">(</font><font color="#ffff63"><b>if</b></font> <font color="#ffa600">(</font>collides? board rotated<font color="#ffa600">)</font>
        shape rotated<font color="#ffa600">))))</font>

<font color="#ffa600">(</font>defn shift [board shape]
  <font color="#ffa600">(</font><font color="#ffff63"><b>let</b></font> [shifted <font color="#ffa600">(</font><font color="#ffff63"><b>map</b></font>
                  <font color="#ffa600">(</font>fn [[x y]]
                    [<font color="#ffa600">(</font><font color="#ffff63"><b>+</b></font> x <font color="#ffa600">(</font><font color="#ffff63"><b>first</b></font> @*offset*<font color="#ffa600">))</font>, y]<font color="#ffa600">)</font>
                  shape<font color="#ffa600">)</font>]
    <font color="#ffa600">(</font><font color="#ffff63"><b>if</b></font> <font color="#ffa600">(</font>collides? board shifted<font color="#ffa600">)</font>
      shape shifted<font color="#ffa600">)))</font>

<font color="#ffa600">(</font>defn transform [board shape drop?]
  <font color="#ffa600">(</font><font color="#ffff63"><b>let</b></font> [shifted <font color="#ffa600">(</font>shift board shape<font color="#ffa600">)</font>
        rotated <font color="#ffa600">(</font>rotate board shifted<font color="#ffa600">)</font>]
    <font color="#ffa600">(</font><font color="#ffff63"><b>if</b></font> drop?
      <font color="#ffa600">(</font><font color="#ffff63"><b>map</b></font> <font color="#ffa600">(</font>fn [[x y]]
             [x, <font color="#ffa600">(</font><font color="#ffff63"><b>if</b></font> drop? <font color="#ffa600">(</font>inc y<font color="#ffa600">)</font> y<font color="#ffa600">)</font>]<font color="#ffa600">)</font> rotated<font color="#ffa600">)</font>
      rotated<font color="#ffa600">)))</font>

<font color="#ffa600">(</font>defn clear-lines [board]
  <font color="#ffa600">(</font><font color="#ffff63"><b>let</b></font> [new-board <font color="#ffa600">(</font><font color="#ffff63"><b>apply</b></font> concat
                    <font color="#ffa600">(</font>filter #<font color="#ffa600">(</font><font color="#ffff63"><b>some</b></font> #{true} %<font color="#ffa600">)</font>
                      <font color="#ffa600">(</font>partition <font color="#63ff63"><b>*cols*</b></font> board<font color="#ffa600">)))</font>]
    <font color="#ffa600">(</font>into
      <font color="#ffa600">(</font>vec <font color="#ffa600">(</font><font color="#ffff63"><b>map</b></font> <font color="#ffa600">(</font>fn [_] true<font color="#ffa600">)</font>
             <font color="#ffa600">(</font>range <font color="#ffa600">(</font><font color="#ffff63"><b>-</b></font> <font color="#ffa600">(</font><font color="#ffff63"><b>count</b></font> board<font color="#ffa600">)</font> <font color="#ffa600">(</font><font color="#ffff63"><b>count</b></font> new-board<font color="#ffa600">)))))</font>
      new-board<font color="#ffa600">)))</font>

<font color="#ffa600">(</font>defn update-board [board shape]
  <font color="#ffa600">(</font>vec <font color="#ffa600">(</font><font color="#ffff63"><b>map</b></font> #<font color="#ffa600">(</font><font color="#ffff63"><b>let</b></font> [[x y] <font color="#ffa600">(</font>pos-to-xy %<font color="#ffa600">)</font>]
               <font color="#ffa600">(</font><font color="#ffff63"><b>if</b></font> <font color="#ffa600">(</font><font color="#ffff63"><b>some</b></font>
                     <font color="#ffa600">(</font>fn [[px py]] <font color="#ffa600">(</font><font color="#ffff63"><b>and</b></font><font color="#ffa600">(</font><font color="#ffff63"><b>=</b></font> x px<font color="#ffa600">)</font> <font color="#ffa600">(</font><font color="#ffff63"><b>=</b></font> y py<font color="#ffa600">)))</font>
                     shape<font color="#ffa600">)</font>
                 false <font color="#ffa600">(</font><font color="#ffff63"><b>get</b></font> board %<font color="#ffa600">)))</font>
         <font color="#ffa600">(</font>range <font color="#ffa600">(</font><font color="#ffff63"><b>count</b></font> board<font color="#ffa600">)))))</font>

<font color="#ffa600">(</font>defn game-over? [board]
  <font color="#ffa600">(</font><font color="#ffff63"><b>not</b></font> <font color="#ffa600">(</font><font color="#ffff63"><b>reduce</b></font> #<font color="#ffa600">(</font><font color="#ffff63"><b>and</b></font> %1 %2<font color="#ffa600">)</font>
         <font color="#ffa600">(</font><font color="#ffff63"><b>butlast</b></font> <font color="#ffa600">(</font><font color="#ffff63"><b>rest</b></font> <font color="#ffa600">(</font>take <font color="#63ff63"><b>*cols*</b></font> board<font color="#ffa600">))))))</font>

<font color="#84a2ff">;;;;;;Controls;;;;</font>
<font color="#ffa600">(</font>def <font color="#63ff63"><b>*dirs*</b></font> {KeyEvent/VK_LEFT  [-1, <font color="#ffa2a5">0</font>]
             KeyEvent/VK_RIGHT [1, <font color="#ffa2a5">0</font>]
             KeyEvent/VK_UP :left
             KeyEvent/VK_DOWN :right}<font color="#ffa600">)</font>

<font color="#ffa600">(</font>defn handle-input [#^KeyEvent event]
  <font color="#ffa600">(</font><font color="#ffff63"><b>let</b></font> [key <font color="#ffa600">(</font>.getKeyCode event<font color="#ffa600">)</font>]
    <font color="#ffa600">(</font><font color="#ffff63"><b>cond</b></font>
      <font color="#ffa600">(</font><font color="#ffff63"><b>or</b></font> <font color="#ffa600">(</font><font color="#ffff63"><b>=</b></font> key KeyEvent/VK_LEFT<font color="#ffa600">)</font> <font color="#ffa600">(</font><font color="#ffff63"><b>=</b></font> key KeyEvent/VK_RIGHT<font color="#ffa600">))</font>
      <font color="#ffa600">(</font><font color="#ffff63"><b>let</b></font> [disp <font color="#ffa600">(</font><font color="#63ff63"><b>*dirs*</b></font> key<font color="#ffa600">)</font>]
        <font color="#ffa600">(</font><font color="#ffff63"><b>when</b></font> disp <font color="#ffa600">(</font>swap! <font color="#63ff63"><b>*offset*</b></font> #<font color="#ffa600">(</font><font color="#ffff63"><b>map</b></font> <font color="#ffff63"><b>+</b></font> disp %<font color="#ffa600">))))</font>
      <font color="#ffa600">(</font><font color="#ffff63"><b>or</b></font> <font color="#ffa600">(</font><font color="#ffff63"><b>=</b></font> key KeyEvent/VK_UP<font color="#ffa600">)</font> <font color="#ffa600">(</font><font color="#ffff63"><b>=</b></font> key KeyEvent/VK_DOWN<font color="#ffa600">))</font>
      <font color="#ffa600">(</font>reset! <font color="#63ff63"><b>*rotation*</b></font> <font color="#ffa600">(</font><font color="#63ff63"><b>*dirs*</b></font> key<font color="#ffa600">)))))</font>

<font color="#ffa600">(</font>defn input-listener []
  <font color="#ffa600">(</font>proxy [ActionListener KeyListener] []
    <font color="#ffa600">(</font>actionPerformed [e]<font color="#ffa600">)</font>
    <font color="#ffa600">(</font>keyPressed [e] <font color="#ffa600">(</font>handle-input e<font color="#ffa600">))</font>
    <font color="#ffa600">(</font>keyReleased [e]<font color="#ffa600">)</font>
    <font color="#ffa600">(</font>keyTyped [e]<font color="#ffa600">)))</font>

<font color="#84a2ff">;;;;;;;UI;;;;;;;;;</font>
<font color="#ffa600">(</font>defn draw [#^Canvas canvas draw-fn]
  <font color="#ffa600">(</font><font color="#ffff63"><b>let</b></font> [buffer  <font color="#ffa600">(</font>.getBufferStrategy canvas<font color="#ffa600">)</font>
        g       <font color="#ffa600">(</font>.getDrawGraphics buffer<font color="#ffa600">)</font>]
    <font color="#ffa600">(</font>try
      <font color="#ffa600">(</font>draw-fn g<font color="#ffa600">)</font>

      <font color="#ffa600">(</font>finally <font color="#ffa600">(</font>.dispose g<font color="#ffa600">)))</font>
    <font color="#ffa600">(</font><font color="#ffff63"><b>if</b></font> <font color="#ffa600">(</font><font color="#ffff63"><b>not</b></font> <font color="#ffa600">(</font>.contentsLost buffer<font color="#ffa600">))</font>
      <font color="#ffa600">(</font>. buffer show<font color="#ffa600">))</font>
    <font color="#ffa600">(</font>.. Toolkit <font color="#ffa600">(</font>getDefaultToolkit<font color="#ffa600">)</font> <font color="#ffa600">(</font>sync<font color="#ffa600">))))</font>

<font color="#ffa600">(</font>defn draw-square [x y #^Graphics g]
  <font color="#ffa600">(</font><font color="#ffff63"><b>let</b></font> [width  <font color="#ffa600">(</font><font color="#ffff63"><b>/</b></font> <font color="#63ff63"><b>*width*</b></font> <font color="#63ff63"><b>*cols*</b></font><font color="#ffa600">)</font>
        height <font color="#ffa600">(</font><font color="#ffff63"><b>/</b></font> <font color="#63ff63"><b>*height*</b></font> <font color="#63ff63"><b>*rows*</b></font><font color="#ffa600">)</font>
        xpos   <font color="#ffa600">(</font><font color="#ffff63"><b>*</b></font> x width<font color="#ffa600">)</font>
        ypos   <font color="#ffa600">(</font><font color="#ffff63"><b>*</b></font> y width<font color="#ffa600">)</font>]
    <font color="#ffa600">(</font>doto g
      <font color="#ffa600">(</font>.setColor Color/RED<font color="#ffa600">)</font>
      <font color="#ffa600">(</font>.fillRect xpos, ypos, width, height<font color="#ffa600">)</font>
      <font color="#ffa600">)))</font>

<font color="#ffa600">(</font>defn draw-game-over [#^Graphics g]
  <font color="#ffa600">(</font>doto g
   <font color="#ffa600">(</font>.setColor Color/BLACK<font color="#ffa600">)</font>
   <font color="#ffa600">(</font>.fillRect <font color="#ffa2a5">0</font> <font color="#ffa2a5">0</font> <font color="#63ff63"><b>*width*</b></font> <font color="#63ff63"><b>*height*</b></font><font color="#ffa600">)</font>
   <font color="#ffa600">(</font>.setColor Color/green<font color="#ffa600">)</font>
   <font color="#ffa600">(</font>.drawString <font color="#ffa2a5">&quot;GAME OVER&quot;</font> <font color="#ffa600">(</font><font color="#ffff63"><b>-</b></font> <font color="#ffa600">(</font><font color="#ffff63"><b>/</b></font> <font color="#63ff63"><b>*width*</b></font> <font color="#ffa2a5">2</font><font color="#ffa600">)</font> <font color="#ffa2a5">50</font><font color="#ffa600">)</font>  <font color="#ffa600">(</font><font color="#ffff63"><b>/</b></font> <font color="#63ff63"><b>*height*</b></font> <font color="#ffa2a5">2</font><font color="#ffa600">))))</font>

<font color="#ffa600">(</font>defn draw-board [board shape]
  <font color="#ffa600">(</font>fn [#^Graphics g]
    <font color="#ffa600">(</font>doto g
      <font color="#ffa600">(</font>.setColor Color/BLACK<font color="#ffa600">)</font>
      <font color="#ffa600">(</font>.fillRect <font color="#ffa2a5">0</font> <font color="#ffa2a5">0</font> <font color="#63ff63"><b>*width*</b></font> <font color="#63ff63"><b>*height*</b></font><font color="#ffa600">))</font>

    <font color="#ffa600">(</font>doseq [square <font color="#ffa600">(</font>range <font color="#ffa600">(</font><font color="#ffff63"><b>count</b></font> board<font color="#ffa600">))</font>]
      <font color="#ffa600">(</font><font color="#ffff63"><b>when</b></font> <font color="#ffa600">(</font><font color="#ffff63"><b>not</b></font> <font color="#ffa600">(</font><font color="#ffff63"><b>get</b></font> board square<font color="#ffa600">))</font>
       <font color="#ffa600">(</font><font color="#ffff63"><b>let</b></font> [[x y] <font color="#ffa600">(</font>pos-to-xy square<font color="#ffa600">)</font>]
         <font color="#ffa600">(</font>draw-square x y g<font color="#ffa600">))))</font>

    <font color="#ffa600">(</font>doseq [[x y] shape]
      <font color="#ffa600">(</font>draw-square x y g<font color="#ffa600">))))</font>

<font color="#ffa600">(</font>defn -main [&amp; args]
  <font color="#ffa600">(</font><font color="#ffff63"><b>let</b></font> [frame  <font color="#ffa600">(</font>JFrame. <font color="#ffa2a5">&quot;Tetris&quot;</font><font color="#ffa600">)</font>
        canvas <font color="#ffa600">(</font>Canvas.<font color="#ffa600">)</font>]
    <font color="#ffa600">(</font>doto frame
      <font color="#ffa600">(</font>.setSize <font color="#63ff63"><b>*width*</b></font> <font color="#ffa600">(</font><font color="#ffff63"><b>+</b></font> <font color="#ffa600">(</font><font color="#ffff63"><b>/</b></font> <font color="#63ff63"><b>*height*</b></font> <font color="#63ff63"><b>*rows*</b></font><font color="#ffa600">)</font> <font color="#63ff63"><b>*height*</b></font><font color="#ffa600">))</font>
      <font color="#ffa600">(</font>.setDefaultCloseOperation JFrame/EXIT_ON_CLOSE<font color="#ffa600">)</font>
      <font color="#ffa600">(</font>.setResizable false<font color="#ffa600">)</font>
      <font color="#ffa600">(</font>.add canvas<font color="#ffa600">)</font>
      <font color="#ffa600">(</font>.setVisible true<font color="#ffa600">))</font>

    <font color="#ffa600">(</font>doto canvas
      <font color="#ffa600">(</font>.createBufferStrategy <font color="#ffa2a5">2</font><font color="#ffa600">)</font>
      <font color="#ffa600">(</font>.addKeyListener <font color="#ffa600">(</font>input-listener<font color="#ffa600">))</font>
      <font color="#ffa600">(</font>.setVisible true<font color="#ffa600">)</font>
    <font color="#ffa600">(</font>.requestFocus<font color="#ffa600">))</font>

    <font color="#84a2ff">;;game loop</font>
    <font color="#ffa600">(</font><font color="#ffff63"><b>loop</b></font> [board    <font color="#ffa600">(</font>get-board<font color="#ffa600">)</font>
           shape    <font color="#ffa600">(</font>get-shape<font color="#ffa600">)</font>
           old-time <font color="#ffa600">(</font>System/currentTimeMillis<font color="#ffa600">)</font>]

      <font color="#ffa600">(</font>reset! <font color="#63ff63"><b>*offset*</b></font> [0,<font color="#ffa2a5">0</font>]<font color="#ffa600">)</font>
      <font color="#ffa600">(</font>reset! <font color="#63ff63"><b>*rotation*</b></font> <font color="#ffff63"><b>nil</b></font><font color="#ffa600">)</font>
      <font color="#ffa600">(</font>Thread/sleep <font color="#ffa2a5">10</font><font color="#ffa600">)</font>
      <font color="#ffa600">(</font>draw canvas <font color="#ffa600">(</font>draw-board board shape<font color="#ffa600">))</font>

      <font color="#ffa600">(</font><font color="#ffff63"><b>let</b></font> [cur-time <font color="#ffa600">(</font>System/currentTimeMillis<font color="#ffa600">)</font>
            new-time <font color="#ffa600">(</font>long <font color="#ffa600">(</font><font color="#ffff63"><b>if</b></font> <font color="#ffa600">(</font><font color="#ffff63"><b>&gt;</b></font> <font color="#ffa600">(</font><font color="#ffff63"><b>-</b></font> cur-time old-time<font color="#ffa600">)</font> <font color="#ffa2a5">150</font><font color="#ffa600">)</font>
                             cur-time
                             old-time<font color="#ffa600">))</font>
            drop?    <font color="#ffa600">(</font><font color="#ffff63"><b>&gt;</b></font> new-time old-time<font color="#ffa600">)</font>]
        <font color="#ffa600">(</font><font color="#ffff63"><b>cond</b></font>
          <font color="#ffa600">(</font>game-over? board<font color="#ffa600">)</font>
          <font color="#ffa600">(</font>draw canvas draw-game-over<font color="#ffa600">)</font>

          <font color="#ffa600">(</font>collides? board shape<font color="#ffa600">)</font>
          <font color="#ffa600">(</font>recur <font color="#ffa600">(</font>update-board board shape<font color="#ffa600">)</font>
            <font color="#ffa600">(</font>get-shape<font color="#ffa600">)</font>
          new-time<font color="#ffa600">)</font>

          <font color="#63ff63"><b>:default</b></font>
          <font color="#ffa600">(</font>recur
            <font color="#ffa600">(</font>clear-lines board<font color="#ffa600">)</font>
            <font color="#ffa600">(</font>transform board shape drop?<font color="#ffa600">)</font>
            new-time<font color="#ffa600">)</font>
          <font color="#ffa600">)))))</font>
<font color="#ffa600">(</font>-main<font color="#ffa600">)</font>
</pre>
</div>
<p>Quite amazing isn&#8217;it?<br />
However, the very next question for me was, why investing time and money into this new language? It&#8217;s definitely interesting, but does it compare to python and django (for example) when it comes to build social web apps? Can&#8217;t really answer to these questions at the moment, but I found really useful the conclusions of an article I found online (on <a href="http://java.ociweb.com/mark/clojure/article.html">Java News Brief</a>):</p>
<blockquote><p>		Are you looking for a way to make concurrent programming easier?<br />
		Are you open to branching outside the world of object-oriented programming to try functional programming?<br />
		Is it important for the applications you write to run on the JVM in order to take advantage of existing Java libraries, portability and other benefits?<br />
		Do you prefer dynamically-typed languages over statically-typed ones?<br />
		Do you find the minimal, consistent syntax of Lisp dialects appealing?<br />
If you answered &#8220;yes&#8221; some of these questions then you should consider using Clojure as your next programming language.</p></blockquote>
<p>Finally, a couple of other useful learning resources:</p>
<p>&#8211; <a href="http://mark.reid.name/sap/setting-up-clojure.html">setting up clojure on mac osX Leopard</a><br />
&#8211; <a href="http://clojure.blip.tv/">clojure for lisp programmers</a> (video lecture)<br />
&#8211; <a href="http://www.moxleystratton.com/article/clojure/for-non-lisp-programmers">Clojure Tutorial For the Non-Lisp Programmer</a><br />
&#8211; a clojure <a href="http://java.ociweb.com/mark/clojure/ClojureSnake.html">implementation of the snake game</a></p>
<p>&#8230;</p>
]]></content:encoded>
							<wfw:commentRss>http://www.michelepasin.org/blog/2010/11/25/clojure-or-not-clojure/feed/</wfw:commentRss>
		<slash:comments>2</slash:comments>
						<post-id xmlns="com-wordpress:feed-additions:1">1024</post-id>	</item>
		<item>
		<title>Scheme and Lisp</title>
		<link>http://www.michelepasin.org/blog/2010/11/08/scheme-and-lisp/</link>
				<pubDate>Mon, 08 Nov 2010 12:57:13 +0000</pubDate>
		<dc:creator><![CDATA[mikele]]></dc:creator>
				<category><![CDATA[Computer Music]]></category>
		<category><![CDATA[code]]></category>
		<category><![CDATA[comparison]]></category>
		<category><![CDATA[lisp]]></category>
		<category><![CDATA[programming]]></category>
		<category><![CDATA[scheme]]></category>

		<guid isPermaLink="false">http://www.michelepasin.org/blog/?p=866</guid>
				<description><![CDATA[If you&#8217;re coming from Lisp, and then start using Scheme (or the other way around) there are a few small differences between the two languages that it&#8217;s useful to always keep in mind. I tried to do that a number of times, but inevitably I find myself once again wondering: how do you say &#8216;progn&#8217; [&#8230;]]]></description>
								<content:encoded><![CDATA[<p>If you&#8217;re coming from Lisp, and then start using Scheme (or the other way around) there are a few small differences between the two languages that it&#8217;s useful to always keep in mind. I tried to do that a number of times, but inevitably I find myself once again wondering: how do you say &#8216;progn&#8217; in scheme? </p>
<p>So, since I recently found online a <a href="http://www.cs.utexas.edu/~novak/schemevscl.html">succinct table</a> that sums up the differences, I thought I&#8217;d pass it on to posterity here too. </p>
<p><a href="http://www.michelepasin.org/blog/wp-content/uploads/2010/11/Screen-shot-2010-11-08-at-14.29.12.png"><img src="http://www.michelepasin.org/blog/wp-content/uploads/2010/11/Screen-shot-2010-11-08-at-14.29.12.png" alt="Screen shot 2010-11-08 at 14.29.12.png" border="0" width="200" height="300" /></a></p>
<p>By the way, on the same site the authors report of a small scheme library (<a href="ftp://ftp.cs.utexas.edu/pub/novak/cs307/initdr.scm">initdr.scm</a>) that implements a few very common Lisp functions. Including [dotimes dolist intersection, union set-difference copy-list subset every some copy-tree subst sublis nconc nreverse]&#8230; Quite useful too!</p>
<h3>UPDATE 28/11/10:</h3>
<p> I realized that most of these lisp functions are <strong>already available</strong> in Impromptu, under the <em>cl:</em> namespace (check out the <a href="http://moso.com.au/wiki/index.php?title=Common_Lisp_Library_Functions">common-lisp library functions</a> section on the wiki). Below are just a couple of additions to that, based on the <em>initdr.scm</em> library I was mentioning.. apologies for the confusion! </p>
<pre style='color:#000000;background:#ffffff; overflow:auto;font-size:13px;'><span style='color:#c34e00; '>;;;;;;;;;;;;;;;;</span>
<span style='color:#c34e00; '>;;; LISP ADDITIONS </span>
<span style='color:#c34e00; '>;; the rest of this is in the cl: impromptu library</span>
<span style='color:#c34e00; '>;;;;;;;;;;;;;;;;</span>


<span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>define</span> cl<span style='color:#800000; font-weight:bold; '>:first</span> car<span style='color:#806030; '>)</span>
<span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>define</span> cl<span style='color:#800000; font-weight:bold; '>:rest</span> cdr<span style='color:#806030; '>)</span>
<span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>define</span> cl<span style='color:#800000; font-weight:bold; '>:count</span> length<span style='color:#806030; '>)</span>

<span style='color:#c34e00; '>;; reverse of cons: (cons 'b '(a))</span>
<span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>define</span> cl<span style='color:#800000; font-weight:bold; '>:l-put</span>
   <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>lambda</span> <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>obj</span> lst<span style='color:#806030; '>)</span>
      <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>reverse</span> <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>cons</span> obj <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>reverse</span> lst<span style='color:#806030; '>)</span><span style='color:#806030; '>)</span><span style='color:#806030; '>)</span><span style='color:#806030; '>)</span><span style='color:#806030; '>)</span>

<span style='color:#c34e00; '>;; dont know why but I like it reversed..</span>
<span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>define</span> cl<span style='color:#800000; font-weight:bold; '>:nth</span> <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>lambda</span> <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>x</span> lst<span style='color:#806030; '>)</span>
               <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>list-ref</span> lst x<span style='color:#806030; '>)</span><span style='color:#806030; '>)</span><span style='color:#806030; '>)</span>


<span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>define</span> <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>1+</span> n<span style='color:#806030; '>)</span> <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>+</span> n <span style='color:#c00000; '>1</span><span style='color:#806030; '>)</span><span style='color:#806030; '>)</span>
<span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>define</span> <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>1-</span> n<span style='color:#806030; '>)</span> <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>-</span> n <span style='color:#c00000; '>1</span><span style='color:#806030; '>)</span><span style='color:#806030; '>)</span>


<span style='color:#c34e00; '>;; (subst 9 7 '(5 (5 6 7(6 7))))    =>  (5 (5 6 9 (6 9)))      </span>
<span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>define</span> <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>cl:subst</span> new old tree<span style='color:#806030; '>)</span>
  <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>if</span> <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>pair?</span> tree<span style='color:#806030; '>)</span>
      <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>let</span> <span style='color:#806030; '>(</span><span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>left</span> <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>subst</span> new old <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>car</span> tree<span style='color:#806030; '>)</span><span style='color:#806030; '>)</span><span style='color:#806030; '>)</span>
            <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>right</span> <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>subst</span> new old <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>cdr</span> tree<span style='color:#806030; '>)</span><span style='color:#806030; '>)</span><span style='color:#806030; '>)</span><span style='color:#806030; '>)</span>
        <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>if</span> <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>and</span> <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>eq?</span> left <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>car</span> tree<span style='color:#806030; '>)</span><span style='color:#806030; '>)</span>
                 <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>eq?</span> right <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>cdr</span> tree<span style='color:#806030; '>)</span><span style='color:#806030; '>)</span><span style='color:#806030; '>)</span>
            tree
            <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>cons</span> left right<span style='color:#806030; '>)</span><span style='color:#806030; '>)</span><span style='color:#806030; '>)</span>
      <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>if</span> <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>eqv?</span> old tree<span style='color:#806030; '>)</span>
          new
          tree<span style='color:#806030; '>)</span><span style='color:#806030; '>)</span><span style='color:#806030; '>)</span>



<span style='color:#c34e00; '>;; (sublis '((6 . 9) (7 . 10)) '(5 (5 6 7 (6 7)))))  => (5 (5 9 10 (9 10)))</span>
<span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>define</span> <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>cl:sublis</span> alist tree<span style='color:#806030; '>)</span>
  <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>if</span> <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>pair?</span> tree<span style='color:#806030; '>)</span>
      <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>let</span> <span style='color:#806030; '>(</span><span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>left</span> <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>sublis</span> alist <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>car</span> tree<span style='color:#806030; '>)</span><span style='color:#806030; '>)</span><span style='color:#806030; '>)</span>
            <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>right</span> <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>sublis</span> alist <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>cdr</span> tree<span style='color:#806030; '>)</span><span style='color:#806030; '>)</span><span style='color:#806030; '>)</span><span style='color:#806030; '>)</span>
        <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>if</span> <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>and</span> <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>eq?</span> left <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>car</span> tree<span style='color:#806030; '>)</span><span style='color:#806030; '>)</span>
                 <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>eq?</span> right <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>cdr</span> tree<span style='color:#806030; '>)</span><span style='color:#806030; '>)</span><span style='color:#806030; '>)</span>
            tree
            <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>cons</span> left right<span style='color:#806030; '>)</span><span style='color:#806030; '>)</span><span style='color:#806030; '>)</span>
      <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>let</span> <span style='color:#806030; '>(</span><span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>new</span> <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>assv</span> tree alist<span style='color:#806030; '>)</span><span style='color:#806030; '>)</span><span style='color:#806030; '>)</span>
        <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>if</span> new
            <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>cdr</span> new<span style='color:#806030; '>)</span>
            tree<span style='color:#806030; '>)</span> <span style='color:#806030; '>)</span> <span style='color:#806030; '>)</span> <span style='color:#806030; '>)</span>


<span style='color:#c34e00; '>;; (copy-tree '(5 (5 6 7(6 7))))</span>
<span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>define</span> <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>cl:copy-tree</span> x<span style='color:#806030; '>)</span>
  <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>if</span> <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>pair?</span> x<span style='color:#806030; '>)</span>
      <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>cons</span> <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>copy-tree</span> <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>car</span> x<span style='color:#806030; '>)</span><span style='color:#806030; '>)</span>
            <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>copy-tree</span> <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>cdr</span> x<span style='color:#806030; '>)</span><span style='color:#806030; '>)</span><span style='color:#806030; '>)</span>
      x<span style='color:#806030; '>)</span><span style='color:#806030; '>)</span>


<span style='color:#c34e00; '>; Convert a floating-point number to a string of sign and at most 4 characters.</span>
<span style='color:#c34e00; '>; Rounds the number so that 1.999 will come out as 2.00 , very small as 0.0 .</span>
<span style='color:#c34e00; '>; numstring is written assuming that num is not too large or too small,</span>
<span style='color:#c34e00; '>; i.e. num must be printable in 4 digits.</span>
<span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>define</span> <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>cl:numstring</span> num<span style='color:#806030; '>)</span>
  <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>let*</span> <span style='color:#806030; '>(</span><span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>numc</span> <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>abs</span> num<span style='color:#806030; '>)</span><span style='color:#806030; '>)</span> <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>sign</span> <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>if</span> <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>&lt;</span> num <span style='color:#c00000; '>0</span><span style='color:#806030; '>)</span> -<span style='color:#c00000; '>1</span> <span style='color:#c00000; '>1</span><span style='color:#806030; '>)</span><span style='color:#806030; '>)</span> <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>exponent</span> <span style='color:#c00000; '>0</span><span style='color:#806030; '>)</span><span style='color:#806030; '>)</span>
    <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>if</span> <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>&lt;</span> numc <span style='color:#800000; '>1.0e-6</span><span style='color:#806030; '>)</span>
    <span style='color:#e60000; '>"0.0"</span>
    <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>begin</span>
      <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>if</span> <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>&lt;</span> numc <span style='color:#800000; '>1.0</span><span style='color:#806030; '>)</span>
          <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>begin</span> <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>while</span> <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>&lt;</span> numc <span style='color:#c00000; '>100</span><span style='color:#806030; '>)</span>
                <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>set!</span> numc <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>*</span> numc <span style='color:#c00000; '>10</span><span style='color:#806030; '>)</span><span style='color:#806030; '>)</span>
                <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>set!</span> exponent <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>1-</span> exponent<span style='color:#806030; '>)</span><span style='color:#806030; '>)</span><span style='color:#806030; '>)</span>
             <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>set!</span> numc <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>*</span> <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>round</span> numc<span style='color:#806030; '>)</span> <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>expt</span> <span style='color:#c00000; '>10</span> exponent<span style='color:#806030; '>)</span><span style='color:#806030; '>)</span><span style='color:#806030; '>)</span> <span style='color:#806030; '>)</span>
          <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>set!</span> numc <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>*</span> numc <span style='color:#800000; '>1.0001</span><span style='color:#806030; '>)</span><span style='color:#806030; '>)</span><span style='color:#806030; '>)</span>
      <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>if</span> <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>&lt;</span> sign <span style='color:#c00000; '>0</span><span style='color:#806030; '>)</span>
          <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>string-append</span> <span style='color:#e60000; '>"-"</span>
                 <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>substring</span> <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>number->string</span> numc<span style='color:#806030; '>)</span> <span style='color:#c00000; '>0</span>
                   <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>min</span> <span style='color:#c00000; '>4</span> <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>string-length</span> <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>number->string</span> numc<span style='color:#806030; '>)</span><span style='color:#806030; '>)</span><span style='color:#806030; '>)</span><span style='color:#806030; '>)</span><span style='color:#806030; '>)</span>
          <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>substring</span> <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>number->string</span> numc<span style='color:#806030; '>)</span> <span style='color:#c00000; '>0</span>
             <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>min</span> <span style='color:#c00000; '>4</span> <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>string-length</span> <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>number->string</span> numc<span style='color:#806030; '>)</span><span style='color:#806030; '>)</span><span style='color:#806030; '>)</span><span style='color:#806030; '>)</span><span style='color:#806030; '>)</span> <span style='color:#806030; '>)</span> <span style='color:#806030; '>)</span> <span style='color:#806030; '>)</span><span style='color:#806030; '>)</span>




<span style='color:#c34e00; '>;(list-flatten '(9 9 (9 9 9 ))))  = (9 9 9 9 9)</span>

<span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>define</span> cl<span style='color:#800000; font-weight:bold; '>:list-flatten</span> 
   <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>lambda</span> <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>l</span><span style='color:#806030; '>)</span>
      <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>cond</span> <span style='color:#806030; '>(</span><span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>null?</span> l<span style='color:#806030; '>)</span>
             <span style='color:#806030; '>'</span><span style='color:#806030; '>(</span><span style='color:#806030; '>)</span><span style='color:#806030; '>)</span>
            <span style='color:#806030; '>(</span><span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>atom?</span> l<span style='color:#806030; '>)</span>
             <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>list</span> l<span style='color:#806030; '>)</span><span style='color:#806030; '>)</span>
            <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>#t</span> <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>append</span> <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>cl:list-flatten</span>  <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>car</span> l<span style='color:#806030; '>)</span><span style='color:#806030; '>)</span> <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>cl:list-flatten</span>  <span style='color:#806030; '>(</span><span style='color:#400000; font-weight:bold; '>cdr</span> l<span style='color:#806030; '>)</span><span style='color:#806030; '>)</span><span style='color:#806030; '>)</span><span style='color:#806030; '>)</span><span style='color:#806030; '>)</span><span style='color:#806030; '>)</span><span style='color:#806030; '>)</span>
</pre>
]]></content:encoded>
									<post-id xmlns="com-wordpress:feed-additions:1">866</post-id>	</item>
		<item>
		<title>A video that may convince you that LISPers are a bit crazy</title>
		<link>http://www.michelepasin.org/blog/2010/10/29/a-video-that-may-convince-you-that-lispers-are-a-bit-crazy/</link>
				<pubDate>Fri, 29 Oct 2010 14:25:26 +0000</pubDate>
		<dc:creator><![CDATA[mikele]]></dc:creator>
				<category><![CDATA[Computer Music]]></category>
		<category><![CDATA[funny]]></category>
		<category><![CDATA[lisp]]></category>
		<category><![CDATA[programming]]></category>
		<category><![CDATA[scheme]]></category>
		<category><![CDATA[video]]></category>

		<guid isPermaLink="false">http://www.michelepasin.org/blog/?p=860</guid>
				<description><![CDATA[Actually it&#8217;s not just a video, there&#8217;s a book too: Land of Lisp, Learn to Program in Lisp, One Game at a Time! by Conrad Barski, M.D. &#8230;]]></description>
								<content:encoded><![CDATA[<p>Actually it&#8217;s not just a video, there&#8217;s a book too:</p>
<p> <a href="http://nostarch.com/lisp.htm">Land of Lisp</a>, <em>Learn to Program in Lisp, One Game at a Time!</em> by Conrad Barski, M.D.</p>
<p>&#8230;</p>
<p><object width="300" height="250"><param name="movie" value="http://www.youtube.com/v/HM1Zb3xmvMc?fs=1&amp;hl=en_US&amp;rel=0&amp;color1=0xe1600f&amp;color2=0xfebd01"></param><param name="allowFullScreen" value="true"></param><param name="allowscriptaccess" value="always"></param></object></p>
]]></content:encoded>
									<post-id xmlns="com-wordpress:feed-additions:1">860</post-id>	</item>
		<item>
		<title>AJAX in Lisp with JQuery</title>
		<link>http://www.michelepasin.org/blog/2008/02/27/ajax-in-lisp-with-jquery/</link>
				<pubDate>Wed, 27 Feb 2008 18:14:30 +0000</pubDate>
		<dc:creator><![CDATA[mikele]]></dc:creator>
				<category><![CDATA[TechLife]]></category>
		<category><![CDATA[jquery]]></category>
		<category><![CDATA[lisp]]></category>
		<category><![CDATA[web]]></category>

		<guid isPermaLink="false">http://people.kmi.open.ac.uk/mikele/blog/?p=271</guid>
				<description><![CDATA[I was asked to give an example of lisp+ajax, so once I prepared it I thought it could be of help to other people too :-) First of all, I am not a professional lisper at all, just got to know it a little during the last two years. The code I&#8217;m presenting here might [&#8230;]]]></description>
								<content:encoded><![CDATA[<p>I was asked to give an example of lisp+ajax, so once I prepared it I thought it could be of help to other people too :-)</p>
<p>First of all, I am not a professional lisper at all, just got to know it a little during the last two years. The code I&#8217;m presenting here might not be the best one, but it works and essentially shows you how to do cool ajax stuff by using lisp [btw, some of this code comes from somebody who knows about lisp much more than I do, <a href="http://www.kmi.open.ac.uk/people/dave/">this guy here</a>].</p>
<p>Anyways, let&#8217;s get going: we want to create a very very simple webapp that changes the color of some text in the page, using an ajax call. So we&#8217;ll have <strong>one main page</strong>, another <strong>page which gives back the code for updating the main page</strong> through ajax, and a <strong>couple of js files </strong>we want to use for the front-end functionality (among them, the fantastic <a href="http://jquery.com/">jquery</a>).</p>
<p>First of all, we&#8217;ll need two handy packages for setting up a fully-working lisp server: <a href="http://www.weitz.de/hunchentoot/">hunchentoot</a> and <a href="http://weitz.de/cl-who/">cl-who</a> (the more you learn  about these packages, the better it is &#8211; and go through the examples &#8211; they&#8217;re really useful!). Once you&#8217;ve installed them, using <a href="http://www.cliki.net/ASDF-Install">asdf-install</a> or whatever-you-like, let&#8217;s load them up and set a couple of environment variables.</p>
<pre><font size="2">(asdf:operate 'asdf:load-op :hunchentoot)
(asdf:operate 'asdf:load-op :cl-who)

(use-package :cl-who)
(setq hunchentoot:*catch-errors-p* nil
hunchentoot:*log-lisp-backtraces-p* t)</font></pre>
<p>Then we define a couple of functions for starting/stopping the server and setting up the dispatcher table, which is where the mapping between web-pages in the application and lisp functions in the backend is specified. We&#8217;ll have three of these mappings: one for the <strong>main</strong> page, one for the page that serves the ajax changes (<strong>what-color?</strong>), and one for passing the static files, such as js and css (<strong>static/</strong>).</p>
<pre><font size="2">

(defvar *web-server* nil)

(defun start-server ()
(setq hunchentoot:*dispatch-table*
(nconc
(mapcar (lambda (args)
(apply #'hunchentoot:create-prefix-dispatcher args))
'(("/static/" serve-static)
("/what-color" what-color?)
("/main" main)))
(list #'hunchentoot:default-dispatcher)))
(setf *web-server* (hunchentoot:start-server :port 3000)))

(defun stop-server ()
(hunchentoot:stop-server *web-server*))

</font></pre>
<p>When the start-server function is called, it&#8217;ll load the dispatch table and start the sever on port 3000.</p>
<p>The hardest thing to do now, before creating the functions that output the web-pages, is to set up the functions that handle the static files. First of all define your <strong>location</strong>, so that lisp knows where the root folder of the webapp is. That&#8217;s how it looks on my mac &#8211; you probably want to change that according to needs.</p>
<pre><font size="2">

(defvar *location* "/Users/myname/dev-try/hunchentoot-examples/")

</font></pre>
<p>Then the function for serving the static files (<strong>serve-static</strong>). In this example web-app we&#8217;ll only have two of them (see below), but you might want to have more (e.g. css, jpg etc..). The other three functions below basically retrieve the static file, check its mime-type and pass it back to the  dispatcher.</p>
<pre><font size="2">

(defun serve-static ()
(let* ((uri (hunchentoot:request-uri))
(file (subseq uri (length "/static/"))))
(format *error-output* "serve-static: file=~S~%" file)
(http-write-file file (mime-types file))))

(defun http-write-file (filename mime-type)
"Send contents of FILENAME to the HTTP stream, along with its MIME-TYPE."
(setf (hunchentoot:content-type) mime-type)
(let* ((stream (hunchentoot:send-headers))
(buffer (make-array 1024 :element-type '(unsigned-byte 8 )))
(local-filename (format nil "~astatic/~a" *location* filename)))
(with-open-file (in local-filename :element-type '(unsigned-byte 8 ))
(loop for pos = (read-sequence buffer in)
until (zerop pos)
do (write-sequence buffer stream :end pos)))))

(defun mime-types (filename)
(let ((ext (subseq filename (+ 1 (position #. filename :from-end t)))))
(second (assoc ext '(("txt" "text/plain")
("css" "text/css")
("lisp" "text/plain")
("html" "text/html")
("js" "text/javascript")
("png" "image/png"))
:test #'string=))))

(defun write-http-stream (mime-type payload)
(setf (hunchentoot:content-type) mime-type)
(write-sequence payload (hunchentoot:send-headers)))

</font></pre>
<p>That was the  trickiest part. Now let&#8217;s just create the functions that produce the html code to be passed to the browser/javascript. Before that, just a couple of useful macros that wrap the standard cl-who functions. <strong>With-html</strong> for creating html code without a header, and <strong>with-html-top</strong> for creating also the header.</p>
<pre><font size="2">

(defmacro with-html (&body body)
`(with-html-output-to-string
(*standard-output* nil :prologue nil :indent nil)
(htm ,@body)))

(defmacro with-html-top (&body body)
`(with-html-output-to-string
(*standard-output* nil :prologue t :indent nil)
,@body))

</font></pre>
<p>Finally, the pages we can call from the browser. <strong>Main</strong> creates the main page of the app, linking to the javascript files. <strong>what-color?</strong> just outputs a random color name out of a predefined list:</p>
<pre><font size="2">

(defun main ()
(with-html-top
(:html (:head
(:title "Home page")
(:script :type "text/javascript" :src "/static/jquery.pack.js")
(:script :type "text/javascript" :src "/static/my_functions.js"))
(:body
(:p :id "text" "Hi there - this is the only page for now")
(:a :href "javascript:changeColor()" "click here to change the color!")))))

(defun what-color? ()
(let ((color-list '("blue" "red" "lavender" "black" "yellow"
"orange" "mandarin" "MistyRose" "Olive")))
(nth (random (length color-list)) color-list)))

</font></pre>
<p>That&#8217;s it really, for the backend. Now all you have to do is to create a <strong>folder called &#8216;static&#8217;</strong> wherever you specified the *location* variable to point at. Inside the folder, put a copy of <a href="http://docs.jquery.com/Downloading_jQuery">the latest JQuery code</a> (<strong>jquery.pack.js</strong>), and create a new file called <strong>my_functions.js</strong> with this elementary function (sorry  &#8211; that&#8217;s all the ajax we&#8217;re getting for now&#8230;) . It&#8217;s a simple function that calls the server for getting a color name, and uses it to change the color of a dom element.</p>
<pre><font size="2">

function changeColor() {
$.get("what-color",
function(data){
$("#text").css("color",data);
}
);
}

</font></pre>
<p>Almost done. Enter <strong>(start-server) </strong>in the lisp listener, and go to <strong>http://localhost:3000/main</strong> to see your first lisp-ajax application! [if the colors don&#8217;t show properly, make sure you are using Firefox]</p>
<p>Have fun!</p>
<p>&nbsp;</p>
]]></content:encoded>
									<post-id xmlns="com-wordpress:feed-additions:1">271</post-id>	</item>
		<item>
		<title>Lisp blog engine</title>
		<link>http://www.michelepasin.org/blog/2007/09/20/lisp-blog-engine/</link>
				<pubDate>Thu, 20 Sep 2007 14:40:41 +0000</pubDate>
		<dc:creator><![CDATA[mikele]]></dc:creator>
				<category><![CDATA[TechLife]]></category>
		<category><![CDATA[blog]]></category>
		<category><![CDATA[lisp]]></category>

		<guid isPermaLink="false">http://people.kmi.open.ac.uk/mikele/blog/?p=251</guid>
				<description><![CDATA[I&#8217;ve been very happy to help out Cyrus Harmon debugging his Nuclblog package to make it work with lispworks too (he developed it using sbcl)&#8230; it took a dozen emails to understand each other &#8211; but the result was worth it! It&#8217;s a hunchentoot-based engine that you can easily modify and adapt to your needs&#8230;. [&#8230;]]]></description>
								<content:encoded><![CDATA[<p>I&#8217;ve been very happy to help out <a href="http://cyrusharmon.org/blog/display?id=76">Cyrus Harmon debugging his Nuclblog package</a> to make it work with lispworks too (he developed it using sbcl)&#8230; it took a dozen emails to understand each other &#8211; but the result was worth it! It&#8217;s a hunchentoot-based engine that you can easily modify and adapt to your needs&#8230;.</p>
<p><img width="247" height="57" src="http://cyrusharmon.org/static/hunchentoot-button.png" /></p>
<p>By the way, a more profane thing: I&#8217;ve always suspected <a href="http://weitz.de/">Edi Weitz</a> (author of many lisp libraries) had a secret passion for Frank Zappa &#8211; but now there&#8217;s no mystery anymore, since a friend pointed me at one of the main sources for his creations&#8217; funny names: <a href="http://wiki.killuglyradio.com/index.php/Hunchentoot">Zappa&#8217;s works</a>!</p>
]]></content:encoded>
									<post-id xmlns="com-wordpress:feed-additions:1">251</post-id>	</item>
		<item>
		<title>Lispdoc &#8211; Online Lisp Documentation Search</title>
		<link>http://www.michelepasin.org/blog/2007/05/18/lispdoc-online-lisp-documentation-search/</link>
				<pubDate>Fri, 18 May 2007 11:09:36 +0000</pubDate>
		<dc:creator><![CDATA[mikele]]></dc:creator>
				<category><![CDATA[TechLife]]></category>
		<category><![CDATA[Tips and Tricks]]></category>
		<category><![CDATA[documentation]]></category>
		<category><![CDATA[lisp]]></category>

		<guid isPermaLink="false">http://people.kmi.open.ac.uk/mikele/blog/?p=234</guid>
				<description><![CDATA[I read this inonPlanet Lisp: William Bland just keeps on improving lispdoc, his online Lisp documentation search utility. The utility has a lot of neat features: A search brings up links to both the CLHS and key CL books and also provides a usage example. Content is provided from Practical Common Lisp (PCL), Successful Lisp, [&#8230;]]]></description>
								<content:encoded><![CDATA[<p><strong>I read this inon<a href="http://planet.lisp.org/">Planet Lisp</a>:</strong></p>
<blockquote><p>William Bland just <a href="http://abstractstuff.livejournal.com/30577.html">  keeps on</a> improving <a href="http://lispdoc.com/">  lispdoc</a>, his online Lisp documentation search  utility. The utility has a lot of neat features:</p>
<ul>
<li>A search brings up links to both the <a href="http://www.lispworks.com/documentation/HyperSpec/Front/">      CLHS</a> and key CL books and also provides a usage example.</li>
<li>Content is provided from <a href="http://gigamonkeys.com/book/">Practical    Common Lisp</a>    (PCL), <a href="http://www.psg.com/~dlamkins/sl/cover.html">Successful    Lisp</a>, <a href="http://www.paulgraham.com/onlisp.html">On    Lisp</a>,    the <a href="http://www.lispworks.com/documentation/HyperSpec/Front/">HyperSpec</a>,    and the docstrings      of <a href="http://sbcl.sourceforge.net/">SBCL</a> (and, soon,      from <a href="http://www.cs.cmu.edu/Groups/AI/html/cltl/cltl2.html">  CLtL2</a> as well).</li>
<li>Example code is    from    <a href="http://gigamonkeys.com/book/">Practical    Common Lisp</a>, <a href="http://www.norvig.com/paip.html">PAIP</a>, <a href="http://www.paulgraham.com/acl.html">ANSI Common Lisp</a>, and    a bunch    of <a href="http://www.cliki.net/ASDF-Install">ASDF-installable    libraries</a>.</li>
<li>There is a <a href="http://mycroft.mozdev.org/download.html?name=lispdoc&#038;sherlock=yes&#038;opensearch=yes">      Firefox plugin</a> that lets you do searches easily in      Firefox.</li>
<li>There is an <a href="http://lispdoc.com/htmlize">  htmlize utility</a> that lets you input a snippet of lisp code and get  a colorized HTML representation of that code (convenient for quickly    getting something that you can put in a web page).</li>
<li>It provides documentation lookup for a lot of <a href="http://lispdoc.com/packages">  commonly-used CL libraries</a>.</li>
<li>You can input search terms in a manner similar to SLIME&#8217;s  &#8220;fuzzy-complete&#8221; (e.g. &#8211; if you enter &#8220;m-v-b&#8221; in the search dialog, it    returns the documentation for &#8220;multiple-value-bind&#8221;).</li>
</ul>
</blockquote>
<p>&nbsp;</p>
]]></content:encoded>
									<post-id xmlns="com-wordpress:feed-additions:1">234</post-id>	</item>
		<item>
		<title>New macs too new for me</title>
		<link>http://www.michelepasin.org/blog/2007/05/11/new-macs-too-new-for-me/</link>
				<pubDate>Fri, 11 May 2007 15:46:08 +0000</pubDate>
		<dc:creator><![CDATA[mikele]]></dc:creator>
				<category><![CDATA[Just Blogging]]></category>
		<category><![CDATA[lisp]]></category>

		<guid isPermaLink="false">http://people.kmi.open.ac.uk/mikele/blog/?p=230</guid>
				<description><![CDATA[I just got a new double processor do-it-all mac from the generous kmi, but surprise&#8230;&#8230; LISP DOESNT WORK ON IT! The link is from one year ago&#8230; i know i&#8217;m among the last ones arriving here&#8230;and especially MCL (which i keep saying is ultra-cool) is a total mystery on intel-based macs. A digitool policy?]]></description>
								<content:encoded><![CDATA[<p><img src="http://www.iprase.tn.it/prodotti/software_didattico/giochi/matematica/images/sorpresa.jpg" /></p>
<p>I just got a new double processor do-it-all mac from the generous kmi, but surprise&#8230;&#8230; <a href="http://lemonodor.com/archives/001334.html">LISP DOESNT WORK ON IT!</a> The link is from one year ago&#8230; i know i&#8217;m among the last ones arriving here&#8230;and especially MCL (which i keep saying is ultra-cool) is a total mystery on intel-based macs. A <a href="http://www.digitool.com/">digitool</a> policy?</p>
]]></content:encoded>
									<post-id xmlns="com-wordpress:feed-additions:1">230</post-id>	</item>
		<item>
		<title>What Lisp to choose, really?</title>
		<link>http://www.michelepasin.org/blog/2007/04/24/what-lisp-to-choose-really/</link>
				<comments>http://www.michelepasin.org/blog/2007/04/24/what-lisp-to-choose-really/#comments</comments>
				<pubDate>Tue, 24 Apr 2007 19:41:53 +0000</pubDate>
		<dc:creator><![CDATA[mikele]]></dc:creator>
				<category><![CDATA[Just Blogging]]></category>
		<category><![CDATA[lisp]]></category>

		<guid isPermaLink="false">http://people.kmi.open.ac.uk/mikele/blog/?p=229</guid>
				<description><![CDATA[During the last days, I almost switched from Lispworks (too many tabs, too many things in general) back to MCL (essential, fast, with a powerful meta-dot command). But I run into many problems, the most important of them is getting ASDF to run, so to be able to run the server (Hunchentoot) from there. I [&#8230;]]]></description>
								<content:encoded><![CDATA[<p>During the last days, I almost switched from Lispworks (too many tabs, too many things in general) back to MCL (essential, fast, with a powerful meta-dot command). But I run into many problems, the most important of them is getting ASDF to run, so to be able to run the server (Hunchentoot) from there. I set up the init file to load ASDF in MCL, and tried to share the same registry which I previously created through Lispworks and asdf-install&#8230;. but it doesnt want to work! Why&#8217;s that?</p>
<p>&#8230;&#8230;&#8230;&#8230;..LISTENER<br />
Welcome to Macintosh Common Lisp Version 5.0!<br />
? (asdf:operate &#8216;asdf:compile-op :asdf-install)<br />
> Error: Error component &#8220;asdf-install&#8221; not found<br />
> While executing: ASDF:FIND-SYSTEM<br />
> Type Command-. to abort.<br />
See the Restarts menu item for further choices.<br />
1 > asdf:*central-registry*<br />
(&#8220;Macintosh HD:Users:michelepasin:Documents:Lisp:asdf-mcl-install-dir:systems:&#8221; *DEFAULT-PATHNAME-DEFAULTS*)<br />
1 > (asdf:operate &#8216;asdf:compile-op :cl-who)<br />
> Error: Error component &#8220;cl-who&#8221; not found<br />
> While executing: ASDF:FIND-SYSTEM<br />
> Type Command-. to abort.<br />
See the Restarts menu item for further choices.<br />
2 > </p>
<p>&#8230;&#8230;&#8230;&#8230;&#8230;INIT file (in MCL folder)<br />
#-:asdf (load &#8220;Macintosh HD:Users:michelepasin:Documents:Lisp:asdf:asdf&#8221;)</p>
<p>(pushnew &#8220;Macintosh HD:Users:michelepasin:Documents:Lisp:asdf-mcl-install-dir:systems:&#8221; asdf:*central-registry* :test #&#8217;equal)</p>
<p>Then later today I found out about <a href="http://digitool.com/pipermail/info-mcl_digitool.com/2006-October/000460.html">this (basically, Digitool&#8217;s misteriosly &#8216;silent&#8217; about MCL and intel-macs)</a>. So the question is: what&#8217;s the right framework to choose?</p>
]]></content:encoded>
							<wfw:commentRss>http://www.michelepasin.org/blog/2007/04/24/what-lisp-to-choose-really/feed/</wfw:commentRss>
		<slash:comments>1</slash:comments>
						<post-id xmlns="com-wordpress:feed-additions:1">229</post-id>	</item>
	</channel>
</rss>
